<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>bridge.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: Ctrip Hybrid Javascript Lib</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">API定义</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">类</a></li>
            <li><a href="#api-modules">模块</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/CtripBar.html">CtripBar</a></li>
            
                <li><a href="../classes/CtripBusiness.html">CtripBusiness</a></li>
            
                <li><a href="../classes/CtripEncrypt.html">CtripEncrypt</a></li>
            
                <li><a href="../classes/CtripFile.html">CtripFile</a></li>
            
                <li><a href="../classes/CtripGeoHelper.html">CtripGeoHelper</a></li>
            
                <li><a href="../classes/CtripMap.html">CtripMap</a></li>
            
                <li><a href="../classes/CtripPage.html">CtripPage</a></li>
            
                <li><a href="../classes/CtripPay.html">CtripPay</a></li>
            
                <li><a href="../classes/CtripPipe.html">CtripPipe</a></li>
            
                <li><a href="../classes/CtripSumSungWallet.html">CtripSumSungWallet</a></li>
            
                <li><a href="../classes/CtripTool.html">CtripTool</a></li>
            
                <li><a href="../classes/CtripUser.html">CtripUser</a></li>
            
                <li><a href="../classes/CtripUtil.html">CtripUtil</a></li>
            
                <li><a href="../classes/Internal.html">Internal</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: bridge.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">

var __CTRIP_JS_PARAM = &quot;?jsparam=&quot;
var __CTRIP_URL_PLUGIN = &quot;ctrip://h5/plugin&quot; + __CTRIP_JS_PARAM;
var __CTRIP_YOUTH_URL_PLUGIN = &quot;ctripyouth://h5/plugin&quot; + __CTRIP_JS_PARAM;

/**
* @class Internal
* @description bridge.js内部使用的工具类
* @brief 内部使用工具类
* @private
*/ 
var Internal = {
    /**
     * @brief 是否是iOS设备
     * @description  bridge.js内部使用，判断是否是iOS
     * @type Bool
     * @property isIOS
     */
    isIOS:false,

    /**
     * @brief 是否是Android设备
     * @description  bridge.js内部使用，判断是否是Android设备
     * @type Bool
     * @property isAndroid
     */
    isAndroid:false,

     /**
     * @brief 是否是WinPhone设备
     * @description  bridge.js内部使用，判断是否是Windows Phone设备
     * @type Bool
     * @property isWinOS
     */
    isWinOS:false,

    /**
     * @brief 当前是否是App环境
     * @description  bridge.js内部使用，判断当前是否是App环境
     * @type Bool
     * @property isInApp
     */
    isInApp:false,
    
    /**
     * @brief 当前携程旅行App版本
     * @description bridge.js内部使用，存储当前携程旅行App版本
     * @type String
     * @property appVersion
     */     
    appVersion:&quot;&quot;,

    /**
     * @brief 当前操作系统版本
     * @description bridge.js内部使用，存储当前操作系统版本
     * @type String
     * @property osVersion
     */ 
    osVersion:&quot;&quot;,

    /**
     * @brief 当前App是否是青春版
     * @description bridge.js内部使用，判断是否是青春版
     * @type String
     * @property isYouthApp
     */ 
    isYouthApp:false,
    
    /**
     * @brief 判断版本大小
     * @description 判断当前版本号是否大于传入的版本号
     * @param {String} verStr 版本号
     * @method isAppVersionGreatThan
     * @return {Bool} 是否大于该版本号
     * @since v5.2
     * @example
     
     * var isLarger = isAppVersionGreatThan(&quot;5.2&quot;); &lt;br /&gt;
     * alert(isLarger); // depends
     */
    isAppVersionGreatThan:function(verStr) {
        if (Internal.isYouthApp) { //青春版不做校验
            return true;
        }

        if ((typeof verStr == &quot;string&quot;) &amp;&amp; (verStr.length &gt; 0)) {
            var inVer = parseFloat(verStr);
            var nowVer = parseFloat(Internal.appVersion);
            if (isNaN(nowVer) || nowVer - inVer &gt;= 0) {
                return true;
            }
        }

        return false;
    },

     /**
     * @brief 判断API是否支持
     * @description 判断API是否支持当前版本
     * @param {String} verStr 版本号
     * @method isSupportAPIWithVersion
     * @return {Bool} 是否支持该API
     * @since v5.2
     * @example
     
     * var isSupport = isSupportAPIWithVersion(&quot;5.2&quot;); &lt;br /&gt;
     * alert(isSupport); // depends
     */
    isSupportAPIWithVersion:function(verStr) {
        if ((verStr != null) &amp;&amp; (!Internal.isAppVersionGreatThan(verStr))) {
            Internal.appVersionNotSupportCallback(verStr);
            return false;
        }
        return true;
    },

   /**
     * @brief app版本过低回调
     * @description 回调H5页面，告知API开始支持的版本号及当前App的版本
     * @param {String} supportVer API支持的版本号
     * @method appVersionNotSupportCallback
     * @since v5.2
     * @author jimzhao
     */
    appVersionNotSupportCallback:function(supportVer) {
        var jsonObj = {&quot;tagname&quot;:&quot;app_version_too_low&quot;,&quot;start_version&quot;:supportVer,&quot;app_version&quot;:Internal.appVersion};
        CtripTool.app_log(JSON.stringify(jsonObj));
        window.app.callback(jsonObj);
    },

    /**
     * @brief 参数错误回调
     * @description 回调H5页面，所调用的JS 参数有错误
     * @param {String} description 错误原因描述
     * @method paramErrorCallback
     * @since v5.2
     * @author jimzhao
     */
    paramErrorCallback:function(description) {
        var jsonObj = {&quot;tagname&quot;:&quot;app_param_error&quot;,&quot;description&quot;:description};
        CtripTool.app_log(JSON.stringify(jsonObj));
        window.app.callback(jsonObj);
    },

   /**
     * @brief 判断字符串是否为空
     * @description 判断字符串是否为空
     * @method isNotEmptyString
     * @param {String} str 需要判断的字符串
     * @since v5.2
     */
    isNotEmptyString:function(str) {
        if ((typeof str == &quot;string&quot;) &amp;&amp; (str.length &gt; 0)) {
            return true;
        }

        return false;
    },


   /**
     * @brief 内部URL跳转
     * @description 内部隐藏iframe，做URL跳转
     * @method loadURL
     * @param {String} url 需要跳转的链接
     * @since v5.2
     */
    loadURL:function(url) {
        var iframe = document.createElement(&quot;iframe&quot;);
        var cont = document.body || document.documentElement;

        iframe.style.display = &quot;none&quot;;
        iframe.setAttribute(&#x27;src&#x27;, url);
        cont.appendChild(iframe);

        setTimeout(function(){
            iframe.parentNode.removeChild(iframe);
            iframe = null;
        }, 200);
    },

   /**
     * @brief 内部组装URL参数
     * @description  内部使用，组装URL参数
     * @return 返回序列化之后的字符串
     * @method makeParamString
     * @param {String} service app响应的plugin的名字
     * @param {String} action 该plugin响应的函数
     * @param {JSON} param 扩展参数，json对象
     * @param {String} callbackTag app回调给H5页面的tagname
     * @since v5.2
     */
    makeParamString:function(service, action, param, callbackTag) {

        if (!Internal.isNotEmptyString(service) || !Internal.isNotEmptyString(action)) {
            return &quot;&quot;;
        }

        if (!param) {
            param = {};
        };

        param.service = service;
        param.action = action;
        param.callback_tagname = callbackTag;

        return JSON.stringify(param);
    },

    /**
     * @brief 内部组装URL
     * @description  内部使用，组装URL
     * @return {String} encode之后的URL
     * @method makeURLWithParam
     * @param {String} paramString 拼接URL参数
     * @since v5.2
     */
    makeURLWithParam:function(paramString) {
        if (paramString == null) {
            paramString = &quot;&quot;;
        }

        paramString = encodeURIComponent(paramString);
        if (Internal.isYouthApp) {
            return __CTRIP_YOUTH_URL_PLUGIN + paramString;
        } else {
            return  __CTRIP_URL_PLUGIN + paramString;
        }
    },

     /**
     * @brief JS调用Win8 native
     * @description  内部使用，用于js调用win8
     * @param {String} 传递给win8的参数
     * @method callWin8App
     * @since v5.3
     */
    callWin8App:function(paramString) {
        window.external.notify(paramString);
    }

//     execAPI:function(supportVersion, modelName, actionName, params, callbackTagName) {
//         console.log(&quot;start exec execAPIA&quot;);
//         if ((supportVersion != null) &amp;&amp; !Internal.isSupportAPIWithVersion(supportVersion)) {
//             return;
//         }
// //        Internal.execAPI(&quot;5.4&quot;,&quot;NavBar&quot;, &quot;setNavBarHidden&quot;,params,&quot;set_navbar_hidden&quot;);

//         paramString = Internal.makeParamString(modelName, actionName, params, callbackTagName);
//         console.log(&quot;start exec execAPIB:&quot; + paramString);

//         if (Internal.isIOS) {
//             url = Internal.makeURLWithParam(paramString);
//             Internal.loadURL(url);
//         }
//         else if(Internal.isAndroid) {
//             try {
//                 var pluginModelName = modelName + &quot;_a&quot;;
//                 var pluginCmd = window[pluginModelName];
//                 if (pluginCmd != null) {
//                     pluginCmd = pluginCmd[actionName];
//                     console.log(&quot;start exec execAPID:&quot; + pluginCmd);

//                     if (pluginCmd != null) {
//                         console.log(&quot;start exec execAPIE:&quot; + pluginCmd);
//                         //pluginCmd=window.Util_a.setNavBarHidden
//                         vard = pluginCmd(paramString);
//                         console.log(&quot;start exec vard:&quot; + vard);
//                         eval(vard);      
//                         console.log(&quot;start exec execAPIF:&quot; + pluginCmd);
                  
//                     }
//                 }
//             } catch(e) {
//                  console.log(&quot;start exec ErrorG:&quot; + e);
//             }
//         }
//         else if (Internal.isWinOS) {
//                 Internal.callWin8App(paramString);
//         }
//     }
};

/**
 * @brief app回调bridge.js
 * @description 将native的callback数据转换给H5页面的app.callback(JSON)
 * @method __bridge_callback
 * @param {String} param native传给H5的字符串,该字符串在app组装的时候做过URLEncode
 * @since v5.2
 * @author jimzhao
 */
function __bridge_callback(param) {
    param = decodeURIComponent(param);
    
    var jsonObj = JSON.parse(param);

    if (jsonObj != null) {
        if (jsonObj.param != null &amp;&amp; jsonObj.param.hasOwnProperty(&quot;platform&quot;)) {
            var ua = navigator.userAgent;
            if (ua.indexOf(&quot;Youth_CtripWireless&quot;) &gt; 0) { 
                Internal.isYouthApp = true;
            } 
            
            platform = jsonObj.param.platform;
            var typePf = typeof platform;

            if (typePf == &quot;number&quot;) { //iOS
                if (platform == 1 || platform == 2 || platform == 3) {
                    Internal.isIOS = (platform == 1);
                    Internal.isAndroid = (platform == 2);
                    Internal.isWinOS = (platform == 3);                    
                }
            }
            else if (typePf == &quot;string&quot;) { //Android
                if (platform == &quot;1&quot; || platform == &quot;2&quot; || platform == &quot;3&quot;) {
                    Internal.isIOS = (platform == &quot;1&quot;);
                    Internal.isAndroid = (platform == &quot;2&quot;);
                    Internal.isWinOS = (platform == &quot;3&quot;);     
                }
            }

            Internal.isInApp = true;
            Internal.appVersion = jsonObj.param.version;
            Internal.osVersion = jsonObj.param.osVersion;
        }

        val = window.app.callback(jsonObj);
        return val;
    }

    return -1;
};

/**
 * @brief app写localstorage
 * @description 写key/value数据到H5页面的local storage
 * @method __writeLocalStorage
 * @param {String} key 需要写入数据库的key
 * @param {String} value 需要写入数据库的value
 * @since v5.2
 * @author jimzhao
 */
function __writeLocalStorage(key, jsonValue) {
    if (Internal.isNotEmptyString(key)) {
        localStorage.setItem(key, jsonValue);
    }
};

/**
 * @class CtripTool
 * @brief 工具类
 * @description 工具类,和App无交互，纯JS处理
 */
var CtripTool = {

    /**
     * @brief 判断当前是否是在App内
     * @description  判断当前H5页面是否是在App内
     * @since 5.2
     * @method app_is_in_ctrip_app
     * @author jimzhao
     * @return bool, true代表在app环境，false表示不在app环境
     * @example 

     * var ret = CtripTool.app_is_in_ctrip_app();
     * alert(&quot;isInApp==&quot;+ret);
     */
    app_is_in_ctrip_app:function() {
        if (Internal.isInApp) {
            return true;
        }

        var isInCtripApp = false;

         var ua = navigator.userAgent;
         if (ua.indexOf(&quot;CtripWireless&quot;)&gt;0) {
            isInCtripApp = true;
         }
        
        return isInCtripApp;
    },

    /**
     * @description 将log写入到native的日志界面，该函数已移动到CtripUtil类，此处只做兼容。具体参考CtripUtil.app_log()函数
     * @brief H5写日志到app(移动到CtripUtil)
     * @method 【Moved】app_log
     * @param {String} log 需要打印打log
     * @param {String} result 上一句log执行的结果，可以为空,打印的时候会自动换行，加入时间
     * @since v5.2
     * @author jimzhao
     * @example 

     CtripUtil.app_log(&quot;execute script xxxxx&quot;, &quot;result for script is oooooo&quot;);
     */
    app_log:function(log, result) {
        CtripUtil.app_log(log, result);
    }
};

/**
 * @class CtripUtil
 * @description 常用Util
 * @brief 常用Util
 */
var CtripUtil = {

    /**
     * @description 调用App的上传ActionLog,移动到CtripBusiness
     * @brief App的上传ActionLog,移动到CtripBusiness
     * @method 【Moved】app_log_event
     * @param {String} event_name 需要纪录的事件名
     * @since v5.2
     * @author jimzhao
     * @example 

     CtripBusiness.app_log_event(&#x27;GoodDay&#x27;)
     */
    app_log_event:function(event_name) {
        CtripBusiness.app_log_event(event_name);
    },


    /**
     * @description 进入H5模块，初始化数据
     * H5接收到web_view_did_finished_load的回调之后，调用该函数，初始化数据会通过callback传递给H5
     * @brief 初始化H5模块数据
     * @method app_init_member_H5_info
     * @since version 5.2
     * @author jimzhao
     * @callback tagname=&quot;init_member_H5_info&quot;
     * @example

         CtripUtil.app_init_member_H5_info();
         //调用完成，H5页面会收到如下返回数据
         var json_obj =
         {
            tagname:&quot;init_member_H5_info&quot;,
            param:{
                timestamp:135333222,
                version:&quot;5.2&quot;,
                device:&quot;iPhone4S&quot;,
                appId:&quot;com.ctrip.wrieless&quot;,
                osVersion:&quot;iOS_6.0&quot;,
                serverVersion:&quot;5.3&quot;,
                platform:1, //区分平台，iPhone为1, Android为2, winPhone为3
                isPreProduction:0,//UAT:2, FAT:0,堡垒:1,生产不会有该字段
                extSouceID:&quot;8888&quot;,//外部渠道ID,since 5.4
                clientID:&quot;1323333333333333&quot;, //客户端唯一标识, since5.4
                systemCode:16, //标准版-iOS:12, android:32; 学生版－ios:16, Android:36, since 5.6
                latitude:32.011111,//缓存的纬度 since 5.7
                longitude:121.000332,//缓存的经度 since 5.7
                screenWidth:320,//晶赞广告系统使用 since 5.7
                screenHeight:480,//晶赞广告系统使用 since 5.7
                screenPxDensity:1,//晶赞广告系统使用 since 5.7
                deviceOSVersion:4.3,//晶赞广告系统使用 since 5.7
                internalVersion:&quot;5.7&quot;,//app内部版本，用于学生版版本更新判断，主版本不用 since 5.8
                userInfo={USERINFO},//USERINFO内部结构参考CtripUser.app_member_login();    
            }
         }
         app.callback(json_obj);
     */
    app_init_member_H5_info:function() {
        paramString = Internal.makeParamString(&quot;User&quot;, &quot;initMemberH5Info&quot;, null, &quot;init_member_H5_info&quot;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if(Internal.isAndroid) {
            window.User_a.initMemberH5Info(paramString);
        }
        else if (Internal.isWinOS) {
                Internal.callWin8App(paramString);
        }
    },

    /**
     * @description 拨打电话
     * @brief 拨打电话
     * @param {String} phone 需要拨打的电话号码，为空时候，会拨打ctrip呼叫中心号码
     * @method app_call_phone
     * @since v5.2
     * @author jimzhao
     * @example 

     CtripUtil.app_call_phone(&quot;13800138000&quot;);
     //或者直接拨打呼叫中心
     CtripUtil.app_call_phone();
     */
    app_call_phone:function(phone) {  

        if(!phone) {
            phone = &quot;&quot;;
        }
        
        var params = {};
        
        params.phone = phone;

        paramString = Internal.makeParamString(&quot;Util&quot;, &quot;callPhone&quot;, params, &quot;call_phone&quot;)
        if (Internal.isIOS) {
            var fixedFlag = false;

            if (Internal.isNotEmptyString(phone)) {
                if (!Internal.appVersion || (Internal.appVersion == &quot;5.2&quot;)) {
                    fixedFlag = true;
                    url = &quot;tel://&quot;+phone;
                    window.location.href = url;
                }
            } 

            if (!fixedFlag) {
                url = Internal.makeURLWithParam(paramString);
                Internal.loadURL(url);
            }
        }
        else if (Internal.isAndroid){
            window.Util_a.callPhone(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

    /**
     * @description 退回到首页，离开H5
     * @brief 回到首页
     * @since v5.2
     * @method app_back_to_home
     * @author jimzhao
     * @example 

     CtripUtil.app_back_to_home();
     */
    app_back_to_home:function() {
        paramString = Internal.makeParamString(&quot;Util&quot;, &quot;backToHome&quot;, null, &quot;back_to_home&quot;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            homeURL = &quot;ctrip://wireless/&quot;;
            if (Internal.isYouthApp) {
                homeURL = &quot;ctripyouth://wireless/&quot;;
            }

            CtripUtil.app_open_url(homeURL, 1, &quot;  &quot;);
            // window.Util_a.backToHome(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

    /**
     * @description 退回到H5页面的上一个页面，离开H5. v5.3开始支持带参数给上一个H5页面
     * @brief 离开H5回上一个页面
     * @method app_back_to_last_page
     * @param {String} callbackString 离开H5页面，需要传递给上一个H5页面的数据，上一个H5页面在web_view_did_appear回调里面将会收到该数据
     * @param {Bool} isDeleteH5Page 是否是直接删除该H5页面。直接删除H5页面时候，页面切换会没有动画效果
     * @since v5.2
     * @author jimzhao
     * @example 

        CtripUtil.app_back_to_last_page(&quot;This is a json string for my previous H5 page&quot;, false);

     */
    app_back_to_last_page:function(callbackString, isDeleteH5Page) {
        var params = {};
        if(!callbackString) {
            callbackString = &quot;&quot;;
        }

        params.callbackString = callbackString;
        params.isDeleteH5Page = isDeleteH5Page;
        paramString = Internal.makeParamString(&quot;Util&quot;, &quot;backToLast&quot;, params, &quot;back_to_last_page&quot;);

        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Util_a.backToLast(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

    /**
     * @description 定位(移动到CtripMap)
     * @brief 定位(移动到CtripMap)
     * @param {Bool} is_async, true标识是异步定位，false标识为同步定位
     * @method 【Moved】app_locate
     * @example

        CtripMap.app_locate(true);
        //定位完成后H5页面会收到回调数据
        var json_obj =
        {
            tagname:&#x27;locate&#x27;,
            param:{
                &quot;value&quot;:{
                    ctyName: &#x27;上海&#x27;,
                    province: &#x27;上海&#x27;,    //5.8.1版本加入
                    district:&quot;浦东新区&quot;, //5.8.1版本加入
                    addrs:&#x27;上海市浦东南路22号&#x27;,
                    lat:&#x27;121.487899&#x27;,
                    lng:&#x27;31.249162&#x27;
                },
                &#x27;timeout&#x27;: &#x27;2013/09/12 12:32:36&#x27;,
                &#x27;locateStatus&#x27;:0,//iOS新增字段:-1网络不通，当前无法定位,-2定位没有开启
            }
        }
        app.callback(json_obj);
     * 
     */
    app_locate:function(is_async) {
        CtripMap.app_locate(is_async);
    },

    /**
     * @description 刷新顶部条按钮和文字(移动到CtripBar)
     * @brief 刷新顶部条按钮和文字(移动到CtripBar)
     * @param (String) nav_bar_config_json 顶部条配置json串
     * @method 【Moved】app_refresh_nav_bar
     * @author jimzhao
     * @since v5.2
     * @example

        请参考 CtripBar.app_refresh_nav_bar(json_str)的使用;
     */
    app_refresh_nav_bar:function(nav_bar_config_json) {
        CtripBar.app_refresh_nav_bar(nav_bar_config_json);
    },


    /**
     * @description Hybrid页面，打开链接URL地址，兼容App和浏览器
     * @brief Hybrid页面打开链接URL
     * @param {String} openUrl @required 需要打开的URL，可以为ctrip://,http(s)://,file://等协议的URL
     * @param {int} targetMode  @required
     0.当前页面刷新url;
     1.处理ctrip://协议;
     2.开启新的H5页面,title生效;
     3.使用系统浏览器打开;
     4.开启本地新的H5页面，title生效，此时URL为相对路径；5.6版本加入
     5.当前页面打开相对路径；5.8版本加入，但是所有版本都支持，5.8之前版本，内部自动调用app_cross_package_href
     * @param {String} title @optional 当targetMode＝2时候，新打开的H5页面的title
     * @param {String} pageName @optional 当targetMode＝0、2、4时候，本页面，或者新打开的H5页面，此时pageName有效，pageName当作H5页面唯一标识，可用于刷新页面；5.6版本加入
     * @param {boolean} isShowLoadingPage  @optional 开启新的webview的时候，是否加载app的loading 
     * @method app_open_url
     * @since v5.2
     * @author jimzhao
     * @example 

     //当前H5页面打开ctrip.com
     CtripUtil.app_open_url(&quot;http://www.ctrip.com&quot;, 0);
     //进入App的酒店详情页
     CtripUtil.app_open_url(&quot;ctrip://wireless/hotel?id=1234&quot;, 1);
     //开启新的H5页面，进入m.ctrip.com
     CtripUtil.app_open_url(&quot;http://m.ctrip.com&quot;, 2, &quot;Ctrip H5首页&quot;, &quot;ctrip_home_page_id&quot;);
     //开启新的H5页面，进入webapp/car/index.html
     CtripUtil.app_open_url(&quot;car/index.html&quot;, 4, &quot;用车首页&quot;, &quot;car_index_page_id&quot;);
     //当前H5页面，跨包跳转进入webapp/car/index.html
     CtripUtil.app_open_url(&quot;car/index.html&quot;, 5, &quot;用车首页&quot;, null);

     */
     app_open_url:function(openUrl, targetMode, title, pageName, isShowLoadingPage) {
        var params = {};
        if(!openUrl) {
            openUrl = &quot;&quot;;
        }
        if (!title) {
            title = &quot;&quot;;
        }
        if (!pageName) {
            pageName = &quot;&quot;;
        }

        params.openUrl = openUrl;
        params.title = title;
        params.targetMode = targetMode;
        params.pageName = pageName;
        params.isShowLoadingPage = isShowLoadingPage;
        paramString = Internal.makeParamString(&quot;Util&quot;, &quot;openUrl&quot;, params, &quot;open_url&quot;);
        
        if (Internal.appVersion) { //有AppVersion，为5.3及之后版本，或者5.2本地H5页面
            if (targetMode == 5) { //targetMode=5,5.8新增,可以兼容到以前版本
                if (Internal.isAppVersionGreatThan(&quot;5.8&quot;)) {
                    firstSplashIndex = openUrl.indexOf(&quot;/&quot;);
                    if (firstSplashIndex &gt; 0) {
                        packageName = openUrl.substr(0, firstSplashIndex);
                        pageParam = openUrl.substr(openUrl)
                        CtripUtil.app_cross_package_href(packageName, pageParam);
                    } else {
                        Internal.appVersionNotSupportCallback(&quot;传入URL有错误，eg. car/index.html#xxooee&quot;);
                    }
                } 
            } else {
                if (Internal.isIOS) {
                    url = Internal.makeURLWithParam(paramString);
                    Internal.loadURL(url);
                }
                else if (Internal.isAndroid) {
                    window.Util_a.openUrl(paramString);
                }
                else if (Internal.isWinOS) {
                    Internal.callWin8App(paramString);
                }
            }
        } 
        else
        {
            var ua = navigator.userAgent;
            var isAndroid52Version = (ua.indexOf(&quot;Android&quot;)&gt;0) &amp;&amp; (ua.indexOf(&quot;CtripWireless&quot;)&gt;0);
            if(isAndroid52Version) {
                try {
                    window.Util_a.openUrl(paramString);
                } 
                catch(e){
                    window.location.href = openUrl;
                }
            } 
            else {
                window.location.href = openUrl;
            }
        }
    },


    /**
     * @description 检查App的版本更新(移动到CtripBusiness)
     * @brief 检查App的版本更新(移动到CtripBusiness)
     * @since v5.2
     * @method 【Moved】app_check_update
     * @author jimzhao
     * @example 

        CtripBusiness.app_check_update();
     *
     */
    app_check_update:function() {
        CtripBusiness.app_check_update();
    },

    /**
     * @description 推荐携程旅行给好友(移动到CtripBusiness)
     * @brief 推荐携程旅行给好友(移动到CtripBusiness)
     * @since v5.2
     * @method 【Moved】app_recommend_app_to_friends
     * @author jimzhao
     * @example 

        CtripBusiness.app_recommend_app_to_friends();
     *
     */
    app_recommend_app_to_friends:function() {
        CtripBusiness.app_recommend_app_to_friends();
    },

    /**
     * @description 添加微信好友(移动到CtripBusiness)
     * @brief 添加微信好友(移动到CtripBusiness)
     * @since v5.2
     * @method 【Moved】app_add_weixin_friend
     * @author jimzhao
     * @example 

         CtripBusiness.app_add_weixin_friend();
     */
    app_add_weixin_friend:function() {
        CtripBusiness.app_add_weixin_friend();
    },

    /**
     * @description H5跨模块/站点跳转
     * @brief H5跨模块/站点跳转
     * @param {String} path 模块名称，如hotel, car, myctrip,
     * @param {String} param 作为URL，拼接在path后面的页面和其它参数 index.html#cashcouponindex?cash=xxxx
     * @method app_cross_package_href
     * @since v5.2
     * @author jimzhao
     * @example
     *
      //跳转到我的携程首页
      CtripUtil.app_cross_package_href(&quot;myctrip&quot;, &quot;index.html?ver=5.2&quot;); 

     */
    app_cross_package_href:function(path, param) {
        var params = {};
        if (!path) {
            path = &quot;&quot;;
        }
        if (!param) {
            param = &quot;&quot;;
        }

        params.path = path;
        params.param = param;

        paramString = Internal.makeParamString(&quot;Util&quot;, &quot;crossPackageJumpUrl&quot;, params, &quot;cross_package_href&quot;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Util_a.crossPackageJumpUrl(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

    /**
     * @description 查看最新版本功能介绍(移动到CtripBusiness)
     * @brief 查看最新版本功能介绍(移动到CtripBusiness)
     * @since v5.2
     * @method 【Moved】app_show_newest_introduction
     * @author jimzhao
     * @example 

     CtripBusiness.app_show_newest_introduction();
     */
    app_show_newest_introduction:function() {
        CtripBusiness.app_show_newest_introduction();
    },

    /**
     * @description 检查当前App网络状况
     * @brief 检查当前App网络状况
     * @since v5.2
     * @method app_check_network_status
     * @author jimzhao
     * @example 

     CtripUtil.app_check_network_status();
     //调用完成后，H5页面会收到如下回调数据
     var json_obj = 
     {
        tagname:&quot;check_network_status&quot;,
        hasNetwork:true,//布尔值返回是否有网络
        networkType:&quot;3G&quot; //5.8开始加入， None-无网络, 2G-蜂窝数据网EDGE/GPRS, 3G-蜂窝数据网HSPDA/LTE等, WIFI-WLAN网络
     }
     app.callback(json_obj);
     
     */
    app_check_network_status:function() {
        paramString = Internal.makeParamString(&quot;Util&quot;, &quot;checkNetworkStatus&quot;, null, &quot;check_network_status&quot;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Util_a.checkNetworkStatus(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

    /**
     * @description 检查是否安装App
     * @brief 检查是否安装App
     * @param {String} openUrl 尝试打开的URL，iOS使用
     * @param {String} packageName app的包名，android使用
     * @method app_check_app_install_status
     * @since v5.2
     * @author jimzhao
     * @example 

     CtripUtil.app_check_app_install_status(&quot;ctrip://wireless&quot;, &quot;com.ctrip.view&quot;);
     //调用完成后，H5页面会收到如下回调数据
     var json_obj = 
     {
        tagname:&quot;check_app_install_status&quot;,
        isInstalledApp:true,//布尔值返回是否有安装
     }
     app.callback(json_obj);
     */
    app_check_app_install_status:function(openUrl, packageName) {
        var params = {};
        if (!openUrl) {
            openUrl = &quot;&quot;;
        }
        if (!packageName) {
            packageName = &quot;&quot;;
        }
        params.openUrl = openUrl;
        params.packageName = packageName;

        paramString = Internal.makeParamString(&quot;Util&quot;, &quot;checkAppInstallStatus&quot;, params, &quot;check_app_install_status&quot;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Util_a.checkAppInstallStatus(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

    /**
     * @description H5通知Native刷新
     * @brief H5通知Native刷新
     * @param {String} pageName 要刷新的页面名字,该字段需要H5和native共同约定，H5调用之后，native需要捕获该名字的boardcast/notification
     * @param {String} jsonStr 刷新该页面需要的参数
     * @method app_refresh_native_page
     * @since v5.2
     * @author jimzhao
     * @example 
        
        5.6新增说明：刷新app_open_url打开的H5页面
        CtripUtil.app_open_url();函数打开的H5页面，设置pagename:h5_page_identify
        CtripUtil.app_refresh_native_page(&quot;h5_page_identify&quot;, &quot;xxxx_json_string&quot;);
        
        先前版本，刷新Native的页面
        //H5调用
        
        CtripUtil.app_refresh_native_page(&quot;xxxxPageName&quot;, &quot;xxxx_json_string&quot;);

        //Native需要处理的地方
     
        //iOS:
        //1. 添加Notification的关注
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(refresh:) name:kH5NativeShouldReloadNotification object:nil];
        
        //2. 实现方法
        - (void)refresh:(NSNotification *)notification {
             NSDictionary *dic = [notification userInfo];
             NSString *value = [dic objectForKey:@&quot;pageName&quot;];
             if ([value isEqualToString:@&quot;xxxxPageName&quot;])
             {
                 NSLog(&quot;Do Something here&quot;);      
             }
        }
        
        //3. 移除Notification的关注
        [[NSNotificationCenter defaultCenter] removeObserver:self];

       // Android:
       // 1. 创建BroadcastReceiver;
        private BroadcastReceiver mFocusNewStateReceiver = new BroadcastReceiver() {
            //@Override
            public void onReceive(Context context, Intent intent) {

                if (H5UtilPlugin.TAG_UPDATE_NATIVE_PAGE.equals(intent.getAction())) {
                    String info = intent.getStringExtra(&quot;info&quot;);
                    if (!StringUtil.emptyOrNull(info)) {
                        try {
                            JSONObject jsonObject = new JSONObject(info);
                            String value = jsonObject.getString(&quot;pageName&quot;);
                            if (!StringUtil.emptyOrNull(value)) {
                                if (value.equalsIgnoreCase(&quot;xxxxPageName&quot;)) {
                                    //TODO: do your job here
                                }
                            }
                        } catch (JSONException e) {
                            e.printStackTrace();
                        } finally {

                        }
                    }
                }
            }
        };
    
        //2. 注册创建BroadcastReceiver;
            IntentFilter filter = new IntentFilter();
            filter.addAction(H5UtilPlugin.TAG_UPDATE_NATIVE_PAGE);
            LocalBroadcastManager.getInstance(getApplicationContext()).registerReceiver(mFocusNewStateReceiver, filter);
            registerReceiver(mFocusNewStateReceiver, filter);

        //3. 使用完成，移除BroadcastReceiver
            LocalBroadcastManager.getInstance(getApplicationContext()).unregisterReceiver(mFocusNewStateReceiver);
            unregisterReceiver(mFocusNewStateReceiver);

     */
    app_refresh_native_page:function(pageName, jsonStr) {
        var params = {};
        if (!pageName) {
            pageName = &quot;&quot;;
        }
        if (!jsonStr) {
            jsonStr = &quot;&quot;;
        }

        params.pageName = pageName;
        params.jsonStr = jsonStr;

        paramString = Internal.makeParamString(&quot;Util&quot;, &quot;refreshNativePage&quot;, params, &quot;refresh_native_page&quot;);
        if(Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Util_a.refreshNativePage(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

    /**
     * @description 复制文字到粘贴板
     * @brief 复制文字到粘贴板
     * @param {String} toCopyStr, 需要复制的文字
     * @method app_copy_string_to_clipboard
     * @since v5.3
     * @author jimzhao
     * @example CtripUtil.app_copy_string_to_clipboard(&quot;words_to_be_copy_xxxxxx&quot;);

     */
    app_copy_string_to_clipboard:function(toCopyStr) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.3&quot;)) {
            return;
        }
        var params = {};
        if (!toCopyStr) {
            toCopyStr = &quot;&quot;;
        }
        params.copyString = toCopyStr;

        paramString = Internal.makeParamString(&quot;Util&quot;, &quot;copyToClipboard&quot;, params, &quot;copy_string_to_clipboard&quot;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Util_a.copyToClipboard(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

    /**
     * @description 从粘贴板读取复制的文字
     * @brief 从粘贴板读取复制的文字
     * @callback tagname=&quot;read_copied_string_from_clipboard&quot;;//返回当前粘贴板中的文字key=copiedString
     * @method app_read_copied_string_from_clipboard
     * @since v5.3
     * @author jimzhao
     * @example 

        Ctrip.app_read_copied_string_from_clipboard();
        //调用该函数之后，H5会收到如下回调
        var json_obj = 
        {
            tagname:&quot;read_copied_string_from_clipboard&quot;,
            copiedString:&quot;words_copied_xxxxxx&quot;;
        }
        app.callback(json_obj);
     */
    app_read_copied_string_from_clipboard:function() {
        var startVersion = &quot;5.3&quot;;
         if (!Internal.isSupportAPIWithVersion(&quot;5.3&quot;)) {
            return;
        }

        paramString = Internal.makeParamString(&quot;Util&quot;, &quot;readCopiedStringFromClipboard&quot;, null, &quot;read_copied_string_from_clipboard&quot;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Util_a.readCopiedStringFromClipboard(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

    /**
     * @description 调用App的分享, 可以支持iOS6系统的分享，具体定义请参考(移动到CtripBusiness)
     * @brief 调用App的分享(移动到CtripBusiness)
     * @param {String} imageRelativePath 将要分享的图片相对路径，相对webapp的路径
     * @param {String} text 需要分享的文字
     * @param {String} title 需要分享的标题, v5.4开始支持该字段，微信和email支持；
     * @param {String} linkUrl 需要分享的链接, v5.4开始支持该字段
     * @param {boolean} isIOSSystemShare  是否是iOS6以上使用系统分享功能,对于先前门票分享功能，需要为true，其它都是false
     * @method 【Moved】app_call_system_share
     * @since v5.3
     * @author jimzhao
     * @example

     *  微信(微信朋友/微信朋友圈)分享说明：
        1. 图片分享，只能分享图片，所传的文字，title都无效；
        2. 链接分享，所传的图片为分享网页的缩略图，title有效；
        3. 纯文本分享，只能分享text，title无效；
        4. 优先级 链接分享&gt;图片分享&gt;纯文本分享。
           a. 如果有linkUrl，会被当作网页分享，图片作为缩略图；
           b. 如果没有linkUrl，有图片，当作图片分享，text,title无效;
           c. 如果没有linkUrl，没有图片，当作纯文本分享；
        
        微博分享：
        1. 图片为所分享的图片；
        2. 分享title不起作用；
        3. 如果linkUrl有， 分享的text后面会自动添加linkUrl
    
        Email分享：
        1. 图片为所分享的图片；
        2. 分享title作为Email标题；
        3. 如果有linkUrl，分享的text后面会自动添加linkUrl;

        短信分享：
        1. 图片为所分享的图片；注：iOS7.0之后才支持；
        2. 分享title不起作用；
        3. 如果有linkUrl，分享的text后面会自动添加linkUrl;

        复制分享：
        1. 分享的图片不起作用;
        2. 分享的title不起作用;
        3. 如果有linkUrl，分享的text后面会自动添加linkUrl;

        CtripBusiness.app_call_system_share(&quot;../wb_cache/pkg_name/md5_url_hash&quot;, &quot;text to share weibo&quot;, &quot;this is titile&quot;, &quot;http://www.ctrip.com/&quot;, false);

     */
    app_call_system_share:function(imageRelativePath, text, title, linkUrl, isIOSSystemShare) {
        CtripBusiness.app_call_system_share(imageRelativePath, text, title, linkUrl, isIOSSystemShare);
    },

    /**
     * @description 根据URL下载数据
     * @brief 根据URL下载数据
     * @param {String} download_url 需要下载内容的URL
     * @param {String} suffix 保存的文件后缀
     * @param {Boolean} isIgnoreHttpsCertification 是否忽略非法的HTTPS证书
     * @method app_download_data
     * @since v5.3
     * @author jimzhao
     * @example

     CtripUtil.app_download_data(&quot;http://www.baidu.com/img/bdlogo.gif&quot;, &quot;gif&quot;);
     //调用该函数后，native会返回H5内容
     var json_obj = {
        tagname:&quot;download_data&quot;,
        error_code:&quot;xxxxx&quot;,//param_error,download_faild
        param:{downloadUrl:&quot;http://www.baidu.com/bdlogo.gif&quot;, savedPath:&quot;../wb_cache/pkg_name/md5_url_hash&quot;, false}
     };
     app.callback(json_obj);
     */
    app_download_data:function(download_url, suffix, isIgnoreHttpsCertification) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.3&quot;)) {
            return;
        }

        var params = {};
        if (!download_url) {
            download_url = &quot;&quot;;
        }
        if (!suffix) {
            suffix = &quot;&quot;;
        }
        params.downloadUrl = download_url;
        params.suffix = suffix;
        params.pageUrl = window.location.href;
        params.isIgnoreHttpsCertification = isIgnoreHttpsCertification;

        var paramString = Internal.makeParamString(&quot;Util&quot;, &quot;downloadData&quot;,params,&quot;download_data&quot;);
        if (Internal.isIOS) {
            var url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Util_a.downloadData(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

    /**
     * @description 打开其它App，android可以根据包名和URL跳转，iOS只支持URL跳转
     * @brief 打开其它App
     * @param {String} packageId 需要打开的app的包名，android使用
     * @param {String} jsonParam 打开指定包名的app，所带的参数，json字符串
     * @param {String} url 需要打开的app支持的URL协议，如ctrip://xxx
     * @method app_open_other_app
     * @since v5.3
     * @author jimzhao
     * @example

     CtripUtil.app_open_other_app(&quot;com.tencent.mm&quot;, null, &quot;weixin://xxxxx&quot;);
     //优先级说明：
     //1. android有packageId的时候，使用packageId＋jsonParam做跳转;
     //2. 无包名时候，android使用URL协议跳转;
     //3. iOS， winPhone OS都使用URL协议跳转;
     */
    app_open_other_app:function(packageId, jsonParam, url) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.3&quot;)) {
            return;
        }

        var params = {};
        if (!packageId) {
            packageId = &quot;&quot;;
        }
        if (!jsonParam) {
            jsonParam = &quot;&quot;;
        }
        if (!url) {
            url = &quot;&quot;;
        }
        params.packageId = packageId;
        params.jsonParam = jsonParam;
        params.url = url;
        var paramString = Internal.makeParamString(&quot;Util&quot;, &quot;openOtherApp&quot;, params, &quot;open_other_app&quot;);

        if (Internal.isIOS) {
            var url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        } 
        else if (Internal.isAndroid) {
            window.Util_a.openOtherApp(paramString);
        } 
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

     /**
     * @description 将log写入到native的日志界面
     * @brief H5写日志到app
     * @method app_log
     * @param {String} log 需要打印打log
     * @param {String} result 上一句log执行的结果，可以为空,打印的时候会自动换行，加入时间
     * @since v5.2
     * @author jimzhao
     * @example

      CtripUtil.app_log(&quot;execute script xxxxx&quot;, &quot;result for script is oooooo&quot;);
     */
    app_log:function(log, result) {
        if (!Internal.isNotEmptyString(log)) {
            return;
        }
        if (!Internal.isNotEmptyString(result)) {
            result = &quot;&quot;;
        }
        var params = {};
        params.log = log;
        params.result = result;
        paramString = Internal.makeParamString(&quot;Util&quot;, &quot;h5Log&quot;, params, &quot;log&quot;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid)
        {
            window.Util_a.h5Log(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

   /**
     * @description 打开Hybrid广告页面，会自动显示底部栏，且右上角有分享安妮 (移动到CtripBusiness)
     * @brief 打开Hybrid广告页面(移动到CtripBusiness)
     * @method 【Moved】app_open_adv_page
     * @param {String} advUrl 广告URL， URL参数带title=xxx,设置xxx为标题
     * @since v5.4
     * @author jimzhao
     * @example

      CtripBusiness.app_open_adv_page(&quot;http://pages.ctrip.com/adv.html?title=标题xxx&quot;);
     */
    app_open_adv_page:function(advUrl) {
        CtripBusiness.app_open_adv_page(advUrl);
    },


     /**
     * @description 选取图片/拍摄照片，base64返回图片
     * @brief 打开Hybrid广告页面
     * @param {int} maxFileSize 最大的图片文件大小，单位是bit，默认200*1024
     * @param {int} maxPhotoCount 最多支持选择的图片个数,默认为1张，此时不显示多选
     * @param {JSON} meta 图片选取相关配置信息，5.8新增，5.8版本开始支持1个key， canEditSinglePhoto:单选能否编辑
     * @method app_choose_photo
     * @since v5.7
     * @author jimzhao
     * @example

       //选择一张需要编辑的图片
       var meta = {};
       meta.canEditSinglePhoto = true;
       CtripUtil.app_choose_photo(200*1024, 1, meta);
        
       //选择多张图片
       CtripUtil.app_choose_photo(200*1024, 2);
        
       //调用完成之后，返回的数据格式
       var json_obj =
        {
            tagname:&quot;choose_photo&quot;,
            param:{
                photoList:[&quot;xx089xessewz....&quot;, &quot;xx089xessewz....&quot;]
            }
        }
        app.callback(json_obj);
     
     */
    app_choose_photo:function(maxFileSize, maxPhotoCount, meta) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.7&quot;)) {
            return;
        }
        var params = {};
        params.maxFileSize = maxFileSize;
        params.maxPhotoCount = maxPhotoCount;
        params.meta = meta;

        var paramString = Internal.makeParamString(&quot;Util&quot;, &quot;choosePhoto&quot;, params, &quot;choose_photo&quot;);

        if (Internal.isIOS) {
            var url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        } 
        else if (Internal.isAndroid) {
            window.Util_a.choosePhoto(paramString);
        } 
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },


     /**
     * @description H5页面加载完成，通知native app，app会隐藏loading界面
     * @brief H5页面加载完成，通知native app
     * @method app_h5_page_finish_loading
     * @since v5.8
     * @author jimzhao
     * @example

       //H5页面加载完成后，通知native隐藏loading界面
       
       CtripUtil.app_h5_page_finish_loading();     
       
     */
    app_h5_page_finish_loading:function() {
        if (!Internal.isSupportAPIWithVersion(&quot;5.8&quot;)) {
            return;
        }

        var paramString = Internal.makeParamString(&quot;Util&quot;, &quot;h5PageFinishLoading&quot;, null, &quot;h5_page_finish_loading&quot;);
        if (Internal.isIOS) {
            var url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        } 
        else if (Internal.isAndroid) {
            window.Util_a.h5PageFinishLoading(paramString);
        } 
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        } 
    }

};

/**
 * @class CtripUser
 * @description 用户相关类
 * @brief 用户相关类
 */
var CtripUser = {

    /**
     * @description 会员登录,native未登录时候，会显示会员登录界面，native会员已登录，直接完成，返回登录的用户信息
     * @brief 会员登录
     * @since 5.2
     * @method app_member_login 
     * @param {Boolean} isShowNonMemberLogin 是否现实非会员登录入， 5.7加入，默认不显示
     * @author jimzhao
     * @example 

     CtripUser.app_member_login(false);
     //调用完成后，H5会收到如下数据
     var userInfo = {
        &quot;timeout&quot;:&quot;2013/09/12&quot;,
        &quot;data&quot;:
        {
          &quot;LoginName&quot;:&quot;wwwwww&quot;,
          &quot;UserID&quot;:&quot;21634352BAC43044380A7807B0699491&quot;,
          &quot;IsNonUser&quot;:false,
          &quot;UserName&quot;:&quot;测试&quot;,
          &quot;Mobile&quot;:&quot;13845612110&quot;,
          &quot;LoginToken&quot;:&quot;&quot;,
          &quot;LoginCode&quot;:0,
          &quot;LoginErrMsg&quot;:&quot;登录成功！&quot;,
          &quot;Address&quot;:&quot;&quot;,
          &quot;Birthday&quot;:&quot;19841010&quot;,
          &quot;Experience&quot;:1453333973000,//微妙timestamp
          &quot;Gender&quot;:1,
          &quot;PostCode&quot;:&quot;111111&quot;,
          &quot;VipGrade&quot;:30,
          &quot;VipGradeRemark&quot;:&quot;钻石贵宾&quot;,
          &quot;Email&quot;:&quot;wang_peng@163.com&quot;,
          &quot;ExpiredTime&quot;:&quot;2013-09-12&quot;,
          &quot;Auth&quot;:&quot;079E643955C63839FF4617743DA20CFD93AFCAF6A82803A6F3ABD9219&quot;,
          &quot;IsRemember&quot;:0,
          &quot;BindMobile&quot;:18688888888
        },  
        &quot;timeby&quot;:1
    }

    var json_obj =
    {
        tagname:&quot;member_login&quot;,
        param:userInfo,
    }
    app.callback(json_obj);
     
     */
    app_member_login:function(isShowNonMemberLogin) {
        var params = {};
        params.isShowNonMemberLogin = isShowNonMemberLogin;
        paramString =  Internal.makeParamString(&quot;User&quot;, &quot;memberLogin&quot;, params, &#x27;member_login&#x27;);

        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.User_a.memberLogin(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

     /**
      * @description 非会员登录
      * @brief 非会员登录
      * @since 5.2
      * @method app_non_member_login
      * @author jimzhao
      * @see app_member_login
      * @example 

      CtripUser.app_non_member_login();
      //调用后，H5会收到native回调的数据
      //回调的数据格式参考app_member_login()
     var userInfo = {
        &quot;timeout&quot;:&quot;2013/09/12&quot;,
        &quot;data&quot;:
        {
          &quot;LoginName&quot;:&quot;wwwwww&quot;,
          &quot;UserID&quot;:&quot;21634352BAC43044380A7807B0699491&quot;,
          &quot;IsNonUser&quot;:false,
          &quot;UserName&quot;:&quot;测试&quot;,
          &quot;Mobile&quot;:&quot;13845612110&quot;,
          &quot;LoginToken&quot;:&quot;&quot;,
          &quot;LoginCode&quot;:0,
          &quot;LoginErrMsg&quot;:&quot;登录成功！&quot;,
          &quot;Address&quot;:&quot;&quot;,
          &quot;Birthday&quot;:&quot;19841010&quot;,
          &quot;Experience&quot;:1453333973000,//微妙timestamp
          &quot;Gender&quot;:1,
          &quot;PostCode&quot;:&quot;111111&quot;,
          &quot;VipGrade&quot;:30,
          &quot;VipGradeRemark&quot;:&quot;钻石贵宾&quot;,
          &quot;Email&quot;:&quot;wang_peng@163.com&quot;,
          &quot;ExpiredTime&quot;:&quot;2013-09-12&quot;,
          &quot;Auth&quot;:&quot;079E643955C63839FF4617743DA20CFD93AFCAF6A82803A6F3ABD9219&quot;,
          &quot;IsRemember&quot;:0,
          &quot;BindMobile&quot;:18688888888
        },  
        &quot;timeby&quot;:1
        }

        var json_obj =
        {
            tagname:&quot;member_login&quot;,
            param:userInfo,
        }
        app.callback(json_obj);
      
      */
    app_non_member_login:function() {
        paramString =  Internal.makeParamString(&quot;User&quot;, &quot;nonMemberLogin&quot;, null, &#x27;non_member_login&#x27;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.User_a.nonMemberLogin(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

 
     /**
      * @description 会员自动登录,对于已经在native登陆的用户，app会通过调用callback回传登录数据，H5页面需要处理用户信息， 不显示输入用户名密码界面
      * @brief 会员自动登录
      * @since 5.2
      * @method app_member_auto_login
      * @author jimzhao
      * @see app_member_login
      * @example 

      CtripUser.app_member_auto_login();
      //调用后，H5会收到native回调的数据
      //回调的数据格式参考app_member_login()
     var userInfo = {
        &quot;timeout&quot;:&quot;2013/09/12&quot;,
        &quot;data&quot;:
        {
          &quot;LoginName&quot;:&quot;wwwwww&quot;,
          &quot;UserID&quot;:&quot;21634352BAC43044380A7807B0699491&quot;,
          &quot;IsNonUser&quot;:false,
          &quot;UserName&quot;:&quot;测试&quot;,
          &quot;Mobile&quot;:&quot;13845612110&quot;,
          &quot;LoginToken&quot;:&quot;&quot;,
          &quot;LoginCode&quot;:0,
          &quot;LoginErrMsg&quot;:&quot;登录成功！&quot;,
          &quot;Address&quot;:&quot;&quot;,
          &quot;Birthday&quot;:&quot;19841010&quot;,
          &quot;Experience&quot;:1453333973000,//微妙timestamp
          &quot;Gender&quot;:1,
          &quot;PostCode&quot;:&quot;111111&quot;,
          &quot;VipGrade&quot;:30,
          &quot;VipGradeRemark&quot;:&quot;钻石贵宾&quot;,
          &quot;Email&quot;:&quot;wang_peng@163.com&quot;,
          &quot;ExpiredTime&quot;:&quot;2013-09-12&quot;,
          &quot;Auth&quot;:&quot;079E643955C63839FF4617743DA20CFD93AFCAF6A82803A6F3ABD9219&quot;,
          &quot;IsRemember&quot;:0,
          &quot;BindMobile&quot;:18688888888
        },  
        &quot;timeby&quot;:1
        }

        var json_obj =
        {
            tagname:&quot;member_login&quot;,
            param:userInfo,
        }
        app.callback(json_obj);
      
      */
    app_member_auto_login:function() {
        paramString =  Internal.makeParamString(&quot;User&quot;, &quot;memberAutoLogin&quot;, null, &#x27;member_auto_login&#x27;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.User_a.memberAutoLogin(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },


     /**
      * @description 用户注册
      * @brief 用户注册
      * @since 5.2
      * @method app_member_register
      * @author jimzhao
      * @see app_member_login
      * @example 

      CtripUser.app_member_register();
      //调用后，H5会收到native回调的数据
      //回调的数据格式参考app_member_login()
     var userInfo = {
        &quot;timeout&quot;:&quot;2013/09/12&quot;,
        &quot;data&quot;:
        {
          &quot;LoginName&quot;:&quot;wwwwww&quot;,
          &quot;UserID&quot;:&quot;21634352BAC43044380A7807B0699491&quot;,
          &quot;IsNonUser&quot;:false,
          &quot;UserName&quot;:&quot;测试&quot;,
          &quot;Mobile&quot;:&quot;13845612110&quot;,
          &quot;LoginToken&quot;:&quot;&quot;,
          &quot;LoginCode&quot;:0,
          &quot;LoginErrMsg&quot;:&quot;登录成功！&quot;,
          &quot;Address&quot;:&quot;&quot;,
          &quot;Birthday&quot;:&quot;19841010&quot;,
          &quot;Experience&quot;:1453333973000,//微妙timestamp
          &quot;Gender&quot;:1,
          &quot;PostCode&quot;:&quot;111111&quot;,
          &quot;VipGrade&quot;:30,
          &quot;VipGradeRemark&quot;:&quot;钻石贵宾&quot;,
          &quot;Email&quot;:&quot;wang_peng@163.com&quot;,
          &quot;ExpiredTime&quot;:&quot;2013-09-12&quot;,
          &quot;Auth&quot;:&quot;079E643955C63839FF4617743DA20CFD93AFCAF6A82803A6F3ABD9219&quot;,
          &quot;IsRemember&quot;:0,
          &quot;BindMobile&quot;:18688888888
        },  
        &quot;timeby&quot;:1
        }

        var json_obj =
        {
            tagname:&quot;member_login&quot;,
            param:userInfo,
        }
        app.callback(json_obj);
          
      */
    app_member_register:function() {
        paramString = Internal.makeParamString(&quot;User&quot;, &quot;memberRegister&quot;, null, &#x27;member_register&#x27;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.User_a.memberRegister(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },


     /**
     * @description H5完成注册，将注册信用户息告知Native，native做登录
     * @brief H5完成注册，通知Native登录
     * @method app_finished_register
     * @param {JSON} userInfoJson 注册完成的用户信息
     * @since v5.7
     * @author jimzhao
     * @example 
        
        var userInfo = {};
        userInfo.userID = &quot;xxxxxx&quot;;
        userInfo.phone=&quot;13900000000&quot;;
        userInfo.password=&quot;asdzxc&quot;;

        CtripUser.app_finished_register(userInfo)

     */
    app_finished_register:function(userInfoJson) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.7&quot;)) {
            return;
        }

        if (!userInfoJson) {
            userInfoJson = &quot;&quot;;
        }

        var params = {};
        params.userInfoJson = userInfoJson;

        paramString = Internal.makeParamString(&quot;User&quot;, &quot;finishedRegister&quot;, params, &quot;finished_register&quot;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        } else if (Internal.isAndroid) {
            window.User_a.finishedRegister(paramString);
        } else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

     /**
     * @description H5登陆完成，将注册信息告知Native，native写入memory，修改登录态
     * @brief H5完成登录，通知Native修改登录态
     * @method app_finished_login
     * @param {JSON} userInfoJson 登录完成，服务器返回的用户信息
     * @since v5.8
     * @author jimzhao
     * @example 
                
        //.... json对象为服务器返回的用户信息对象
        var userModel = {};
        userModel.UserID = &quot;132220000&quot;;
        userModel.UserName = &quot;U2SB&quot;;
        userModel.Mobilephone = &quot;13899999999&quot;;
        userModel.BindedMobilePhone = &quot;13899999999&quot;;
        userModel.Telephone = &quot;021-9999999&quot;
        userModel.Gender =  0;
        userModel.Address = &quot;火星，上海，月球&quot;;
        userModel.PostCode = &quot;210000&quot;;
        userModel.Birthday = &quot;1900-08-01&quot;;
        userModel.Email =  &quot;US2B@gmail.com&quot;;
        userModel.Experience = 1344;
        userModel.VipGrade = 32;//
        userModel.VipGradeRemark = &quot;蓝宝石&quot;;
        userModel.SignUpdate = &quot;1911-09-09&quot;;
        userModel.Authentication = &quot;2cxesescvdsfew32w3sxcq23&quot;;
        userModel.UserIconList = [];

        CtripUser.app_finished_login(userInfo)

     */
    app_finished_login:function(userInfoJson) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.8&quot;)) {
            return;
        }
        if (!userInfoJson) {
            userInfoJson = &quot;&quot;;
        }

        var params = {};
        params.userInfoJson = userInfoJson;

        paramString = Internal.makeParamString(&quot;User&quot;, &quot;finishedLogin&quot;, params, &quot;finished_login&quot;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        } else if (Internal.isAndroid) {
            window.User_a.finishedLogin(paramString);
        } else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    }

};


/**
 * @class CtripEncrypt
 * @description 加解密/HASH/编码相关类
 * @brief 提供给H5试用，通用加解密/HASH/编码相关类
 */

 var CtripEncrypt = {
    /**
      * @description  base64 UTF8编码
      * @brief base64 UTF8编码
      * @since 5.4
      * @method app_base64_encode
      * @param {String} toIncodeString 需要做base64 encode的字符串
      * @author jimzhao
      * @example 

      CtripEncrypt.app_base64_encode(&quot;xxxxxx&quot;);
      //调用后，H5会收到native回调的数据
        var json_obj =
        {
            tagname:&quot;base64_encode&quot;,
            param:
            {
                inString:&quot;xxxxxx&quot;,
                encodedString:&quot;eHh4eHh4&quot;,
            },
        }
        app.callback(json_obj);
          
      */
    app_base64_encode:function(toIncodeString) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.3&quot;)) {
            return;
        }

        if (!toIncodeString) {
            toIncodeString = &quot;&quot;;
        }

        params = {};
        params.toIncodeString = toIncodeString;

        paramString = Internal.makeParamString(&quot;Encrypt&quot;, &quot;base64Encode&quot;, params, &#x27;base64_encode&#x27;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Encrypt_a.base64Encode(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

     /**
      * @description MD5 哈希算法，长度32，大写
      * @brief MD5 哈希算法
      * @since 5.4
      * @method app_md5_hash
      * @param {String} inString 需要做MD5 哈希的字符串
      * @author jimzhao
      * @example 

      CtripEncrypt.app_md5_hash(&quot;abcdxxxx&quot;);
      //调用后，H5会收到native回调的数据
        var json_obj =
        {
            tagname:&quot;md5_hash&quot;,
            param:
            {   
                inString:&quot;abcdxxxx&quot;
                outString:&quot;FDA820BA864415E2451BE1C67F1F304A&quot;,
            },
        }
        app.callback(json_obj);
          
      */
    app_md5_hash:function(inString) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.5&quot;)) {
            return;
        }

        if (!inString) {
            inString = &quot;&quot;;
        }

        params = {};
        params.inString = inString;

        paramString = Internal.makeParamString(&quot;Encrypt&quot;, &quot;md5Hash&quot;, params, &#x27;md5_hash&#x27;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Encrypt_a.md5Hash(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

    /**
      * @description Ctrip私有加解密算法
      * @brief Ctrip私有加解密算法
      * @since 5.5
      * @method app_ctrip_encrypt
      * @param {String} inString 需要做加解密的字符串
      * @param {String} encType 加解密类型，加密为1， 解密为2，其它不处理
      * @author jimzhao
      * @example 

      CtripEncrypt.app_ctrip_encrypt(&quot;abcdxxxx&quot;,1);
      //调用后，H5会收到native回调的数据
        var json_obj =
        {
            tagname:&quot;ctrip_encrypt&quot;,
            param:
            {
                inString:&quot;abcdxxxx&quot;,
                outString:&quot;ABScdXkYZunwXVF5kQpffnY+oL/MFmJGkn8ra8Ab5cI=&quot;,
                encType:1
            },
        }
        app.callback(json_obj);
          
      */
    app_ctrip_encrypt:function(inString, encType) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.5&quot;)) {
            return;
        }
        if (!inString) {
            inString = &quot;&quot;;
        }

        params = {};
        params.inString = inString;
        params.encType = encType;
        paramString = Internal.makeParamString(&quot;Encrypt&quot;, &quot;ctripEncrypt&quot;, params, &#x27;ctrip_encrypt&#x27;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Encrypt_a.ctripEncrypt(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    }

 };


/**
 * @class CtripPay
 * @description Ctrip相关支付控件
 * @brief 提供Ctrip业务相关的支付功能
 */
 var CtripPay = {

     /**
      * @description  检查支付相关App安装情况
      * @brief  检查支付相关App安装情况
      * @since 5.4
      * @method app_check_pay_app_install_status
      * @author jimzhao
      * @example 

      CtripPay.app_check_pay_app_install_status();
      //调用后，H5会收到native回调的数据
        var json_obj =
        {
            tagname:&quot;check_pay_app_install_status&quot;,
            param:
            {
                platform:&quot;iOS&quot;, //Android
                weixinPay:true,
                aliWalet:true,
                aliQuickPay:true,
            },
        }

        app.callback(json_obj);
      */
    app_check_pay_app_install_status:function() {
        if (!Internal.isSupportAPIWithVersion(&quot;5.4&quot;)) {
            return;
        }

        var paramString = Internal.makeParamString(&quot;Pay&quot;,&quot;checkPayAppInstallStatus&quot;,null,&#x27;check_pay_app_install_status&#x27;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Pay_a.checkPayAppInstallStatus(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

    /**
      * @description  根据URL打开支付App
      * @brief  根据URL打开支付App
      * @param {String} payAppName 支付App的URL，暂固定为以下4个， aliWalet/aliQuickPay/wapAliPay/weixinPay(微信支付暂未支持)
      * @param {String} payMeta 服务器返回的支付配置信息，ali相关为URL，微信支付为xml
      * @param {String} successRelativeURL 支付成功跳转的URL
      * @param {String} detailRelativeURL  支付失败或者支付
      * @since 5.4
      * @method app_open_pay_app_by_url
      * @author jimzhao
      * @example 

      CtripPay.app_open_pay_app_by_url(&quot;aliWalet&quot;,&quot;alipay://orderId=123&quot;,&quot;car/paySuccess.html&quot;, &quot;car/payDetail.html&quot;);
      //调用后，App会做相应的页面跳转

      */
    app_open_pay_app_by_url:function(payAppName, payMeta, successRelativeURL, detailRelativeURL) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.4&quot;)) {
            return;
        }

        if (!payMeta) {
            payMeta = &quot;&quot;;
        }
        
        if (!payAppName) {
            payAppName = &quot;&quot;;
        }

        if (!successRelativeURL) {
            successRelativeURL = &quot;&quot;;
        }

        if (!detailRelativeURL) {
            detailRelativeURL = &quot;&quot;;
        }

        var params = {};
        params.payMeta = payMeta;
        params.payAppName = payAppName;
        params.successRelativeURL = successRelativeURL;
        params.detailRelativeURL = detailRelativeURL;

        var paramString = Internal.makeParamString(&quot;Pay&quot;,&quot;openPayAppByURL&quot;,params,&#x27;open_pay_app_by_url&#x27;);

        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Pay_a.openPayAppByURL(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    }
 };

/**
 * @class CtripPipe
 * @description App给H5提供的通讯管道
 * @brief 提供标准HTTP和H5管道服务
 */
var CtripPipe = {

    /**
     * @description H5通过App发送服务
     * @brief H5通过App发送服务
     * @method app_send_HTTP_pipe_request
     * @param {String} baseURL HTTP请求发送的URL地址     
     * @param {String} path HTTP请求发送的URL的路径
     * @param {String} method HTTP请求方式GET/POST
     * @param {String} header HTTP头，JSON字符串格式key/value，cookie作为一个key存储再HEADER内部
     * @param {Array}  parameters key=value形式的字符串数组,请做好参数的Encode，app端只负责拼接
     * @param {Boolean}  isIgnoreHTTPSCertification 是否忽略HTTPS证书
     * @param {String} sequenceId 发送服务的序列号，随机生存即可
     * @since v5.4
     * @author jimzhao
     * @example 

     //GET http://www.baidu.com/s?wd=good+day&amp;rsv_bp=0&amp;ch=&amp;tn=baidu&amp;bar=&amp;rsv_spt=3&amp;ie=utf-8&amp;rsv_sug3=4&amp;rsv_sug4=469&amp;rsv_sug1=2&amp;rsv_sug2=0&amp;inputT=166
    
      var paramArr = new Array();
      paramArr[0]=&quot;wd=good+day&quot;;
      paramArr[1]=&quot;rsv_bp=0&quot;;
      paramArr[2]=&quot;ch=&quot;;
      paramArr[3]=&quot;tn=&quot;;
      paramArr[4]=&quot;baidu=&quot;;
      paramArr[5]=&quot;bar=&quot;;
      paramArr[6]=&quot;rsv_spt=3&quot;;
      paramArr[7]=&quot;ie=utf-8&quot;;
      paramArr[8]=&quot;rsv_sug3=4&quot;;
      paramArr[9]=&quot;rsv_sug4=469&quot;;
      //。。。。其它参数依次类推，请做好参数的Encode，app端只负责拼接

      CtripPipe.app_send_HTTP_pipe_request(&quot;http://www.baidu.com&quot;, &quot;/s&quot;,&quot;GET&quot;,null,paramArr, false, &quot;13222222&quot;);

     //调用后，H5会收到native回调的数据
        var json_obj =
        {
            tagname:&quot;send_http_pipe_request&quot;,
            param:
            {
                responseString:&quot;eHh4eHh4&quot;,
                responseCookie : {
                     &quot;BAIDUID&quot;:&quot;2959D035E2F5D7C979687934D558DCD3:FG=1&quot;,
                     &quot;BDSVRTM&quot;:10,
                     &quot;BD_CK_SAM&quot;:1,
                     &quot;H_PS_PSSID&quot;:&quot;1429_5225_5287_5722_5848_4261_5830_4759_5659_5857&quot;
                },

                sequenceId:&quot;13222222&quot;
            },
        }
        app.callback(json_obj);

     */
    app_send_HTTP_pipe_request:function(baseURL, path, method, header, parameters, isIgnoreHTTPSCertification, sequenceId) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.4&quot;)) {
            return;
        }

        if (!baseURL) {
            baseURL = &quot;&quot;;
        }
        if (!path) {
            path = &quot;&quot;;
        }
        if (!method) {
            method = &quot;&quot;;
        }
        if (!header) {
            header = &quot;&quot;;
        }
        if (!parameters) {
            parameters = &quot;&quot;;
        }

        if (!sequenceId) {
            sequenceId = &quot;&quot;;
        }
        var params = {};
        params.baseURL = baseURL;
        params.path = path;
        params.method = method;
        params.header = header;
        params.parameters = parameters;
        params.sequenceId = sequenceId;
        params.isIgnoreHTTPSCertification = isIgnoreHTTPSCertification;

        paramString = Internal.makeParamString(&quot;Pipe&quot;, &quot;sendHTTPPipeRequest&quot;, params, &#x27;send_http_pipe_request&#x27;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Pipe_a.sendHTTPPipeRequest(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }

    },

     /**
     * @description 根据发送的sequenceId，终止正在发送的HTTP请求
     * @brief 终止正在发送的HTTP请求
     * @method app_abort_HTTP_pipe_request
     * @param {String} sequenceId 发送服务的序列号，随机生存即可
     * @since v5.4
     * @author jimzhao
     * @example 
     
      CtripPipe.app_abort_HTTP_pipe_request(&quot;13523333333&quot;);

     */
    app_abort_HTTP_pipe_request:function(sequenceId) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.4&quot;)) {
            return;
        }

        if (!sequenceId) {
            sequenceId = &quot;&quot;;
        }

        var params = {};
        params.sequenceId = sequenceId;
        paramString = Internal.makeParamString(&quot;Pipe&quot;, &quot;abortHTTPRequest&quot;, params, &#x27;abort_http_pipe_request&#x27;);
        
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        } 
        else if (Internal.isAndroid) {
            window.Pipe_a.abortHTTPRequest(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

     /**
     * @description H5通过App发送服务
     * @brief H5通过App发送服务
     * @method app_send_H5_pipe_request
     * @param {String} serviceCode 需要发送服务的服务号
     * @param {String} header 服务的header
     * @param {String} data 服务所需要的数据部分，各个服务都不同
     * @param {String} sequenceId 发送服务的序列号，随机生存即可
     * @param {int} pipeType 管道类型，因mobileServer原因，5.4的管道是支付专用，默认是0=支付管道，1＝公共管道
     * @since v5.4
     * @author jimzhao
     * @example 
     
      CtripUtil.app_send_H5_pipe_request(&quot;9500001&quot;, &quot;H5Agent&quot;,&quot;{}&quot;,&quot;13523333333&quot;);
     //调用后，H5会收到native回调的数据

        //成功 
        var json_obj =
        {
            tagname:&quot;send_h5_pipe_request&quot;,
            param:
            {
                sequenceId:&quot;13523333333&quot;,
                resultMessage:&quot;eHh4eHh4&quot;,
                resultHead:&quot;eHh4eHh4&quot;,
                resultBody:&quot;eHh4eHh4&quot;,
                result:1,
            },
        }

        //失败
        var json_obj =
        {
            tagname:&quot;send_h5_pipe_request&quot;,
            param:
            {
                sequenceId:&quot;13523333333&quot;,
                errorInformation:&quot;eHh4eHh4&quot;,
                serverErrorCode:&quot;eHh4eHh4&quot;,
            },
        }
        app.callback(json_obj);

     */
    app_send_H5_pipe_request:function(serviceCode,header,data, sequenceId, pipeType) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.4&quot;)) {
            return;
        }

        if (!serviceCode) {
            serviceCode = &quot;&quot;;
        }
        if (!header) {
            header = &quot;&quot;;
        }
        if (!data) {
            data = &quot;&quot;;
        }
        if (!sequenceId) {
            sequenceId = &quot;&quot;;
        }

        if (!pipeType) {
            pipeType = 0;
        }

        var params = {};
        params.serviceCode = serviceCode;
        params.header = header;
        params.data = data;
        params.sequenceId = sequenceId;
        params.pipeType = pipeType;

        paramString = Internal.makeParamString(&quot;Pipe&quot;, &quot;sendH5PipeRequest&quot;, params, &#x27;send_h5_pipe_request&#x27;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Pipe_a.sendH5PipeRequest(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    }
};



/**
 * @class CtripSumSungWallet
 * @description 三星钱包相关API
 * @brief 三星钱包相关API
 */
var CtripSumSungWallet = {

     /**
     * @description 检查ticket是否在三星钱包app中
     * @brief 检查ticket是否在三星钱包app中
     * @method app_check_ticket_in_samsung_wallet
     * @param {String} ticketID ticket的ID，服务器返回
     * @since v5.3.2
     * @author jimzhao
     * @example 
     * 
     * CtripSumSungWallet.app_check_ticket_in_samsung_wallet(&quot;ID123333&quot;);

       //调用之后会收到
        var json_obj = {
            tagname : &quot;check_ticket_in_samsung_wallet&quot;,
            param : {
                insInSamSungWallet: false, //true
            }
        }
        
        app.callback(json_obj);
     */
    app_check_ticket_in_samsung_wallet:function(ticketID) {
        if (!ticketID) {
            ticketID = &quot;&quot;;
        }

        var param = {};
        param.ticketID = ticketID;

        paramString = Internal.makeParamString(&quot;SamSungWallet&quot;, &quot;checkTicketInSamSungWallet&quot;, param, &#x27;check_ticket_in_samsung_wallet&#x27;);
        if (Internal.isAndroid) {
            window.SamSungWallet_a.checkTicketInSamSungWallet(paramString);
        }
    },

     /**
     * @description 到三星钱包中下载ticket
     * @brief 到三星钱包中下载ticket
     * @method app_download_ticket_in_samsung_wallet
     * @param {String} ticketID ticket的ID，服务器返回
     * @since v5.32
     * @author jimzhao
     * @example 
     * 
     * CtripSumSungWallet.app_download_ticket_in_samsung_wallet(&quot;ID123333&quot;);
    
        //调用之后会收到
        var json_obj = {
            tagname : &quot;download_ticket_in_samsung_wallet&quot;,
            param : {
                isDownloadSuccess: false, //true，下载成功的时候没有errorInfo
                errorInfo: &quot;网络故障&quot;, 
            }
        }

        app.callback(json_obj);
     */
    app_download_ticket_in_samsung_wallet:function(ticketID) {
        if (!ticketID) {
            ticketID = &quot;&quot;;
        }

        var param = {};
        param.ticketID = ticketID;

        paramString = Internal.makeParamString(&quot;SamSungWallet&quot;, &quot;downloadTicketInSamSungWallet&quot;, param, &#x27;download_ticket_in_samsung_wallet&#x27;);
        if (Internal.isAndroid) {
            window.SamSungWallet_a.downloadTicketInSamSungWallet(paramString);
        }
    },

     /**
     * @description 在三星钱包app中查看Ticket
     * @brief 在三星钱包app中查看Ticket
     * @method app_show_ticket_in_samsung_wallet
     * @param {String} ticketID ticket的ID，服务器返回
     * @since v5.32
     * @author jimzhao
     * @example 
     
      CtripSumSungWallet.app_show_ticket_in_samsung_wallet(&quot;ID123333&quot;);

     //调用之后会收到
        var json_obj = {
            tagname : &quot;show_ticket_in_samsung_wallet&quot;,
            param : {
                errorInfo: &quot;Ticket ID不存在&quot;, //true
            }
        }
        
        app.callback(json_obj);
     */
    app_show_ticket_in_samsung_wallet:function(ticketID) {
        if (!ticketID) {
            ticketID = &quot;&quot;;
        }

        var param = {};
        param.ticketID = ticketID;

        paramString = Internal.makeParamString(&quot;SamSungWallet&quot;, &quot;showTicketInSamSungWallet&quot;, param, &#x27;show_ticket_in_samsung_wallet&#x27;);
        if (Internal.isAndroid) {
            window.SamSungWallet_a.showTicketInSamSungWallet(paramString);
        }
    }

};

/**
 * @class CtripFile
 * @description 文件IO操作相关API
 * @brief 文件IO操作相关API
 */

var CtripFile  = {
    /**
     * @description 获取当前web页面的sandbox目录，在webapp/wb_cache/xxxx/目录下xxxx即为当前sandbox的名字
     * @brief 获取当前web页面的sandbox目录
     * @method app_get_current_sandbox_name
     * @since v5.4
     * @author jimzhao
     * @example 
     
      CtripFile.app_get_current_sandbox_name();

     //调用之后会收到
        var json_obj = {
            tagname : &quot;get_current_sandbox_name&quot;,
            param : {
                sandboxName: &quot;car&quot;, 
            }
        }
        
        app.callback(json_obj);
     */
    app_get_current_sandbox_name:function() {
        if (!Internal.isSupportAPIWithVersion(&quot;5.4&quot;)) {
            return;
        }

        var params = {};
        params.pageUrl = window.location.href;

        paramString = Internal.makeParamString(&quot;File&quot;, &quot;getCurrentSandboxName&quot;, params, &#x27;get_current_sandbox_name&#x27;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        } 
        else if (Internal.isAndroid) {
            window.File_a.getCurrentSandboxName(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },
    
     /**
     * @description 文本写入文件中，UTF8编码。可以指定文件名，或者相对路径
     * @brief 写文本到本地文件
     * @method app_write_text_to_file
     * @param {String} text 需要写入文件的文本内容
     * @param {String} fileName 写入的文件路径
     * @param {String} relativeFilePath 写入的文件相对路径，需要调用app_get_current_sandbox_name获取sandbox的名字+路径
     * @param {BOOL} isAppend 是否是将当前文件append到已有文件
     * @since v5.4
     * @author jimzhao
     * @example 
     
      CtripFile.app_write_text_to_file(&quot;Hello,世界&quot;, &quot;log.txt&quot;, null, false); //文件存储在本地的/webapp/wb_cache/car/log.txt
      CtripFile.app_write_text_to_file(&quot;Hello2,世界&quot;, null, /car/mydir/log.txt, false); //文件存储在本地的/webapp/wb_cache/car/mydir/log.txt

     //调用之后会收到
        var json_obj = {
            tagname : &quot;write_text_to_file&quot;,
            param : {
                isSuccess: true, 
            }
        }
        
        app.callback(json_obj);
     */
    app_write_text_to_file:function(text, fileName, relativeFilePath, isAppend) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.4&quot;)) {
            return;
        }

        if (!text) {
            text = &quot;&quot;;
        }
        if (!fileName) {
            fileName = &quot;&quot;;
        }
        if (!relativeFilePath) {
            relativeFilePath = &quot;&quot;;
        }
        var params = {};
        params.pageUrl = window.location.href;
        params.text = text;
        params.fileName = fileName;
        params.relativeFilePath = relativeFilePath;
        params.isAppend = isAppend;
        paramString = Internal.makeParamString(&quot;File&quot;, &quot;writeTextToFile&quot;, params, &#x27;write_text_to_file&#x27;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.File_a.writeTextToFile(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

     /**
     * @description 删除文件/目录。可以指定文件名，或者相对路径
     * @brief 删除文件/目录
     * @method app_delete_file
     * @param {String} fileName 需要删除的文件路径
     * @param {String} relativeFilePath 需要删除的文件相对路径，需要调用app_get_current_sandbox_name获取sandbox的名字+路径
     * @since v5.4
     * @author jimzhao
     * @example 
     
      CtripFile.app_delete_file(&quot;log.txt&quot;, null); //删除文件/webapp/wb_cache/car/log.txt
      CtripFile.app_delete_file(null,&quot;/car/mydir/log.txt&quot;; //删除文件/webapp/wb_cache/car/mydir/log.txt

     //调用之后会收到
        var json_obj = {
            tagname : &quot;delete_file&quot;,
            param : {
                isSuccess: true, 
            }
        }
        
        app.callback(json_obj);
     */    
    app_delete_file:function(fileName, relativeFilePath) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.4&quot;)) {
            return;
        }

        if (!fileName) {
            fileName = &quot;&quot;;
        }
        if (!relativeFilePath) {
            relativeFilePath = &quot;&quot;;
        }

        var params = {};
        params.fileName = fileName;
        params.relativeFilePath = relativeFilePath;
        params.pageUrl = window.location.href;
        paramString = Internal.makeParamString(&quot;File&quot;, &quot;deleteFile&quot;, params, &#x27;delete_file&#x27;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        } 
        else if (Internal.isAndroid) {
            window.File_a.deleteFile(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },
    
    /**
     * @description 读取文本文件内容，UTF-8编码。可以指定文件名，或者相对路径
     * @brief 读取文本文件内容
     * @method app_read_text_from_file
     * @param {String} fileName 需要读取内容的文件路径
     * @param {String} relativeFilePath 需要读取内容的文件相对路径，需要调用app_get_current_sandbox_name获取sandbox的名字+路径
     * @since v5.4
     * @author jimzhao
     * @example 
     
      CtripFile.app_read_text_from_file(&quot;log.txt&quot;, null); //从文件/webapp/wb_cache/car/log.txt读取内容
      CtripFile.app_read_text_from_file(null,&quot;/car/mydir/log.txt&quot;; //从文件/webapp/wb_cache/car/mydir/log.txt读取内容

     //调用之后会收到
        var json_obj = {
            tagname : &quot;read_text_from_file&quot;,
            param : {
                text: &quot;Hello,世界&quot;, 
            }
        }
        
        app.callback(json_obj);
     */ 
    app_read_text_from_file:function(fileName, relativeFilePath) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.4&quot;)) {
            return;
        }

        if (!fileName) {
            fileName = &quot;&quot;;
        }
        if (!relativeFilePath) {
            relativeFilePath = &quot;&quot;;
        }

        var params = {};
        params.fileName = fileName;
        params.pageUrl = window.location.href;
        params.relativeFilePath = relativeFilePath;
        paramString = Internal.makeParamString(&quot;File&quot;, &quot;readTextFromFile&quot;, params, &#x27;read_text_from_file&#x27;);

        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.File_a.readTextFromFile(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },
    
    /**
     * @description 读取文件大小。可以指定文件名，或者相对路径
     * @brief 读取文件大小
     * @method app_get_file_size
     * @param {String} fileName 需要读取文件大小的文件路径
     * @param {String} relativeFilePath 需要读取文件大小的文件相对路径，需要调用app_get_current_sandbox_name获取sandbox的名字+路径
     * @since v5.4
     * @author jimzhao
     * @example 
     
      CtripFile.app_get_file_size(&quot;log.txt&quot;, null); //从文件/webapp/wb_cache/car/log.txt读取内容
      CtripFile.app_get_file_size(null,&quot;/car/mydir/log.txt&quot;; //从文件/webapp/wb_cache/car/mydir/log.txt读取内容

     //调用之后会收到
        var json_obj = {
            tagname : &quot;get_file_size&quot;,
            param : {
                fileSize: 8 
            }
        }
        
        app.callback(json_obj);
     */ 
    app_get_file_size:function(fileName, relativeFilePath) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.4&quot;)) {
            return;
        }

        if (!fileName) {
            fileName = &quot;&quot;;
        }
        if (!relativeFilePath) {
            relativeFilePath = &quot;&quot;;
        }

        var params = {};
        params.fileName = fileName;
        params.relativeFilePath = relativeFilePath;
        params.pageUrl = window.location.href;
        paramString = Internal.makeParamString(&quot;File&quot;, &quot;getFileSize&quot;, params, &#x27;get_file_size&#x27;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.File_a.getFileSize(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },
    
      /**
     * @description 检查文件是否存在。可以指定文件名，或者相对路径
     * @brief 检查文件是否存在
     * @method app_check_file_exist
     * @param {String} fileName 需要读取文件大小的文件路径
     * @param {String} relativeFilePath 需要读取文件大小的文件相对路径，需要调用app_get_current_sandbox_name获取sandbox的名字+路径
     * @since v5.4
     * @author jimzhao
     * @example 
     
      CtripFile.app_check_file_exist(&quot;log.txt&quot;, null); //从文件/webapp/wb_cache/car/log.txt读取内容
      CtripFile.app_check_file_exist(null,&quot;/car/mydir/log.txt&quot;; //从文件/webapp/wb_cache/car/mydir/log.txt读取内容

     //调用之后会收到
        var json_obj = {
            tagname : &quot;check_file_exist&quot;,
            param : {
                isExist: true 
            }
        }
        
        app.callback(json_obj);
     */ 
    app_check_file_exist:function(fileName, relativeFilePath) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.4&quot;)) {
            return;
        }

        if (!fileName) {
            fileName = &quot;&quot;;
        }
        if (!relativeFilePath) {
            relativeFilePath = &quot;&quot;;
        }

        var params = {};
        params.fileName = fileName;
        params.relativeFilePath = relativeFilePath;
        params.pageUrl = window.location.href;
        paramString = Internal.makeParamString(&quot;File&quot;, &quot;checkFileExist&quot;, params, &#x27;check_file_exist&#x27;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.File_a.checkFileExist(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },
    
    /**
     * @description 创建文件夹。可以指定文件名，或者相对路径
     * @brief 创建文件夹
     * @method app_make_dir
     * @param {String} dirName 需要创建的文件夹路径
     * @param {String} relativeDirPath 需要创建的文件夹相对路径，需要调用app_get_current_sandbox_name获取sandbox的名字+路径
     * @since v5.4
     * @author jimzhao
     * @example 
     
      CtripFile.app_make_dir(&quot;mydir2&quot;, null); //创建文件夹/webapp/wb_cache/car/mydir2/
      CtripFile.app_make_dir(null,&quot;/car/mydir/innerDir&quot;; //创建文件夹/webapp/wb_cache/car/mydir/innerDir/

     //调用之后会收到
        var json_obj = {
            tagname : &quot;make_dir&quot;,
            param : {
                isSuccess: true 
            }
        }
        
        app.callback(json_obj);
     */ 
    app_make_dir:function(dirName,relativeDirPath) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.4&quot;)) {
            return;
        }

        if (!dirName) {
            dirName = &quot;&quot;;
        }
        if (!relativeDirPath) {
            relativeDirPath = &quot;&quot;;
        }

        var params = {};
        params.dirName = dirName;
        params.pageUrl = window.location.href;
        params.relativeDirPath = relativeDirPath;

        paramString = Internal.makeParamString(&quot;File&quot;, &quot;makeDir&quot;, params, &#x27;make_dir&#x27;);

         if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.File_a.makeDir(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    }
    
};

/**
 * @class CtripBar
 * @description H5页面顶部导航栏和底部工具栏的控制
 * @brief H5页面顶部/底部导航栏控制
 */

var CtripBar = {
     /**
     * @description 刷新顶部条按钮和文字
     * @brief 刷新顶部条按钮和文字
     * @param {String} nav_bar_config_json 顶部条配置json串
     * @method app_refresh_nav_bar
     * @author jimzhao
     * @since v5.2
     * @example

        //导航栏总共分为3部分:
        1.左侧，返回按钮，不能修改; 

        2.中间title，可以自定义，样式总共3种;
            a.标题[1行或者2行subtitle]；key=center;
           center:[
                {
                    &quot;tagname&quot;: &quot;title&quot;, 
                    &quot;value&quot;:&quot;携程&quot; //标题文字
                },
                {
                    &quot;tagname&quot;:&quot;subtitle&quot;,//子标题的tagname必须为subtitle
                     value:&quot;上海到北京&quot;, //子标题文字
                }
            ],
            b.带事件的标题；key=centerButtons;
            centerButtons:[
                {
                    &quot;tagname&quot;: &quot;cityChoose&quot;,  //点击标题回调H5的tagname
                    &quot;value&quot;:&quot;上海&quot;,  //标题文字
                    &quot;a_icon&quot;:&quot;icon_arrowx&quot;, //标题文字后面的按钮图片名，for android @deprecated
                    &quot;i_icon&quot;:&quot;icon_arrowx.png&quot;, //标题文字后面的按钮图片名，for iOS @deprecated
                    &quot;imagePath&quot;:&quot;car/res/logo.png&quot;, //标题文字后面的按钮图片名，图片路径，相对于业务模块的路径，比如car/res/logo.png， v5.8开始支持
                    &quot;pressedImagePath&quot;:&quot;car/res/logo.png&quot;  //标题文字后面的按钮图片名，选中状态图片路径，相对于业务模块的路径，比如car/res/logo.png， v5.8开始支持
                }
            ], 

        3.右侧按钮,key=right, 可以自定义，样式总共3种， 
            A.1个文字按钮;
            B.1个图片按钮；
            C.2个图片按钮；
            单个右侧按钮样式的定义格式为
            right:[{
                tagname:&quot;xxxx&quot;,  //点击之后 callback给H5的事件名字,
                value:&quot;btn_title&quot;, //按钮上的文字
                imagePath:&quot;car/res/logo.png&quot;,  //按钮上的图片，可以是相对于业务模块的路径，比如 car/res/logo.png， v5.8开始支持
                pressedImagePath:&quot;car/res/logo.png&quot; //按钮上的图片选中的效果图，可以是相对于业务模块的路径，比如 car/res/logo.png， v5.8开始支持
            }]
           

        4.跟多按钮,key=moreMenus 5.9新增 多个menu的配置
            moreMenus:[
                {
                    tagname:&quot;xxxx&quot;,  //点击之后 callback给H5的事件名字,
                    value:&quot;btn_title&quot;, //按钮上的文字
                    imagePath:&quot;car/res/logo.png&quot;,  //按钮上的图片，可以是相对于业务模块的路径，比如 car/res/logo.png， v5.8开始支持
                    pressedImagePath:&quot;car/res/logo.png&quot; //按钮上的图片选中的效果图，可以是相对于业务模块的路径，比如 car/res/logo.png， v5.8开始支持
                }

                {
                    tagname:&quot;xxxx&quot;,  //点击之后 callback给H5的事件名字,
                    value:&quot;btn_title&quot;, //按钮上的文字
                    imagePath:&quot;car/res/logo.png&quot;,  //按钮上的图片，可以是相对于业务模块的路径，比如 car/res/logo.png， v5.8开始支持
                    pressedImagePath:&quot;car/res/logo.png&quot; //按钮上的图片选中的效果图，可以是相对于业务模块的路径，比如 car/res/logo.png， v5.8开始支持
                }

                {
                    tagname:&quot;xxxx&quot;,  //点击之后 callback给H5的事件名字,
                    value:&quot;btn_title&quot;, //按钮上的文字
                    imagePath:&quot;car/res/logo.png&quot;,  //按钮上的图片，可以是相对于业务模块的路径，比如 car/res/logo.png， v5.8开始支持
                    pressedImagePath:&quot;car/res/logo.png&quot; //按钮上的图片选中的效果图，可以是相对于业务模块的路径，比如 car/res/logo.png， v5.8开始支持
                }

            ]

        5.  app预置tagname定义及说明(hybrid开发人员请避免使用以下预置的tagname)：
            1). tagname=home, 返回app首页，图片，事件 都不需要H5处理；
            2). tagname=call, 拨打呼叫中心，图片，事件 都不需要H5处理；
            3). tagname=phone, 拨打电话，图片-native预置，事件交由H5处理；v5.8开始支持；
            4). tagname=share, 分享，图片-native预置，事件将会交给H5处理；v5.8开始支持；
            5). tagname=favorite, 收藏，图片-native预置, 事件交给H5处理；v5.8开始支持；
            6). tagname=favorited, 已经收藏，图片-native预置，事件交给H5处理；v5.8开始支持；
            7). tagname=more, 图片，事件 都不需要H5处理；
            8). tagname=more-my_order, 更多菜单-我的订单, 图片，事件 都不需要H5处理;
            9). tagname=more-message_center, 更多菜单-消息中心, 图片，事件 都不需要H5处理;
           10). tagname=more-home, 更多菜单-App首页, 图片，事件 都不需要H5处理;
           11). tagname-more-my_favorite 更多菜单－我的收藏, 图片，事件 都不需要H5处理;
           12). 其他tagname，图片有H5提供，事件H5处理；

        示例：
        var nav_json = {   
            &quot;right&quot;: [{&quot;tagname&quot;: &quot;click_tag_name&quot;, &quot;value&quot;:&quot;Click&quot;, &quot;imagePath&quot;:&quot;car/res/logo.png&quot;, &quot;pressedImagePath&quot;:&quot;car/res/logo_pressed.png&quot;}],
            &quot;center&quot;: [{&quot;tagname&quot;: &quot;title&quot;, &quot;value&quot;:&quot;携程&quot;},{&quot;tagname&quot;:&quot;subtitle&quot;, value:&quot;上海到北京&quot;}],
            &quot;centerButtons&quot;: [{&quot;tagname&quot;: &quot;cityChoose&quot;, &quot;value&quot;:&quot;上海&quot;, &quot;a_icon&quot;:&quot;icon_arrowx&quot;, &quot;i_icon&quot;:&quot;icon_arrowx.png&quot;,&quot;imagePath&quot;:&quot;car/res/logo.png&quot;, &quot;pressedImagePath&quot;:&quot;car/res/logo_pressed.png&quot;}], 
        }
        var json_str = JSON.stringify(nav_json);
        CtripBar.app_refresh_nav_bar(json_str);

        //调用完成，顶部条title为携程，右侧有一个按钮，按钮文字为Click，用户点击按钮后，H5页面会收到如下回调
        var cb_json = {tagname:&quot;click_tag_name&quot;};
        app.callback(cb_json);
        //H5页面需要处理tagname为click_tag_name的事件

     */
    app_refresh_nav_bar:function(nav_bar_config_json) {
        if (Internal.isNotEmptyString(nav_bar_config_json)) {
            jsonObj = JSON.parse(nav_bar_config_json);

            jsonObj.service = &quot;NavBar&quot;;
            jsonObj.action = &quot;refresh&quot;;
            jsonObj.callback_tagname = &quot;refresh_nav_bar&quot;;
            
            paramString = JSON.stringify(jsonObj);

            if (Internal.isIOS) {
                url = Internal.makeURLWithParam(paramString);
                Internal.loadURL(url);
            }
            else if (Internal.isAndroid) {
                window.NavBar_a.refresh(paramString);
            }
            else if (Internal.isWinOS) {
                Internal.callWin8App(paramString);
            }
        }
    },


      /**
     * @description 设置顶部导航栏隐藏／显示，使用该函数的隐藏顶部栏之后，必须保证页面有离开H5页面的功能，否则用户无法离开，必须要kill掉app。
     * @brief 顶部导航隐藏／显示
     * @param {boolean} isHidden 是否隐藏顶部导航栏
     * @since 5.4
     * @method app_set_navbar_hidden
     * @author jimzhao
     * @example 

     CtripBar.app_set_navbar_hidden(false);
     */
    app_set_navbar_hidden:function(isHidden) {
        var params = {};
        params.isHidden = isHidden;
        // Internal.execAPI(&quot;5.4&quot;,&quot;NavBar&quot;, &quot;setNavBarHidden&quot;,params,&quot;set_navbar_hidden&quot;);
        if (!Internal.isSupportAPIWithVersion(&quot;5.4&quot;)) {
            return;
        }  

        var params = {};
        params.isHidden = isHidden;
        paramString = Internal.makeParamString(&quot;NavBar&quot;,&quot;setNavBarHidden&quot;,params,&quot;set_navbar_hidden&quot;);
        
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.NavBar_a.setNavBarHidden(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }   
    },

      /**
     * @description 设置底部工具栏隐藏／显示
     * @brief 底部工具栏隐藏／显示
     * @param {boolean} isHidden 是否隐藏底部工具栏
     * @since 5.4
     * @method app_set_toolbar_hidden
     * @author jimzhao
     * @example 

     CtripBar.app_set_toolbar_hidden(false);
     */
    app_set_toolbar_hidden:function(isHidden) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.4&quot;)) {
            return;
        }
        var params = {};
        params.isHidden = isHidden;
        paramString = Internal.makeParamString(&quot;NavBar&quot;,&quot;setToolBarHidden&quot;,params,&quot;set_toolbar_hidden&quot;);
        
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.NavBar_a.setToolBarHidden(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }   
    }
};


/**
 * @class CtripMap
 * @description 地图相关类，定位/导航
 * @brief 地图相关类，定位/导航
 */

var CtripMap = {
 /**
     * @description 定位，定位完成会有2次callback，第一次返回经纬度信息(5.8加入，使用定位缓存的时候，不回掉该结果，直接回掉逆地址解析的数据)，第二次返回逆地址解析的信息
     * @brief 定位
     * @param {Bool} is_async true标识是异步定位，false标识为同步定位
     * @method app_locate
     * @author jimzhao
     * @since v5.1
     * @example
        //调用定位
        CtripUtil.app_locate(true);

        //1. 返回定位的经纬度信息-------5.8版本加入
        var geo_json_obj = 
         {
            tagname:&#x27;locate&#x27;,
            param:{
                &quot;value&quot;:{
                    lat:&#x27;121.487899&#x27;,
                    lng:&#x27;31.249162&#x27;
                },
                &#x27;timeout&#x27;: &#x27;2013/09/12 12:32:36&#x27;,
            }
        }
        app.callback(geo_json_obj);


        //2. 返回定位的逆地址解析信息
        var json_obj =
        {
            tagname:&#x27;locate&#x27;,
            param:{
                &quot;value&quot;:{
                    ctyName: &#x27;上海&#x27;,
                    addrs:&#x27;上海市浦东南路22号&#x27;,
                    lat:&#x27;121.487899&#x27;,
                    lng:&#x27;31.249162&#x27;
                },
                &#x27;timeout&#x27;: &#x27;2013/09/12 12:32:36&#x27;,
                &#x27;locateStatus&#x27;:0,//iOS新增字段:-1网络不通，当前无法定位,-2定位没有开启
            }
        }
        app.callback(json_obj);
     * 
     */
    app_locate:function(is_async) {
        var params = {};
        params.is_async = is_async;

        paramString = Internal.makeParamString(&quot;Locate&quot;, &quot;locate&quot;, params, &#x27;locate&#x27;)
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Locate_a.locate(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

    /**
     * @description 在地图上显示某个位置
     * @brief 在地图上显示某个位置/导航
     * @param {double} latitude, 纬度
     * @param {double} longitude, 经度
     * @param {String} title, 在地图上显示的点的主标题
     * @param {String} subtitle, 在地图上显示点的附标题
     * @method app_show_map
     * @author jimzhao
     * @since v5.5
     * @example
        
        CtripMap.app_show_map(31.3222323, 121.32232332, &quot;上海野生动物园&quot;, &quot;浦东新区陆家嘴1234号&quot;);
     *
     */
    app_show_map:function(latitude, longitude, title, subtitle) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.5&quot;)) {
            return;
        }

        if (!title) {
            title = &quot;&quot;;
        }
        if (!subtitle) {
            subtitle = &quot;&quot;;
        }

        var params = {};
        params.latitude = latitude;
        params.longitude = longitude;
        params.title = title;
        params.subtitle = subtitle;
        paramString = Internal.makeParamString(&quot;Locate&quot;, &quot;showMap&quot;,params, &#x27;show_map&#x27;);

        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Locate_a.showMap(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

     /**
     * @description 在地图上显示多个POI位置点
     * @brief 在地图上显示多个位置/导航
     * @param {Array} poiList poi列表, list中为JSON对象，key为：latitude, longitude, title, subtitle
     * @method app_show_map_with_POI_list
     * @author jimzhao
     * @since v5.8
     * @example
        
        var poi0 = {};
        poi0.latitude = 31.3222323; //must
        poi0.longitude = 121.32232332;//must
        poi0.title = &quot;上海野生动物园&quot;; //must
        poi0.subtitle = &quot;浦东新区陆家嘴1234号&quot;;//optional

        var poi1 = {};
        poi1.latitude = 30.3222323; //must
        poi1.longitude = 120.32232332;//must
        poi1.title = &quot;上海野生动物园A&quot;; //must
        poi1.subtitle = &quot;浦东新区陆家嘴1234号A&quot;;//optional


        var poi2 = {};
        poi2.latitude = 32.3222323; //must
        poi2.longitude = 122.32232332;//must
        poi2.title = &quot;上海野生动物园B&quot;; //must
        poi2.subtitle = &quot;浦东新区陆家嘴1234号B&quot;;//optional
        
        var poiList = new Array();
        poiList[0] = poi0;
        poiList[1] = poi1;
        poiList[2] = poi2;

        CtripMap.app_show_map(poiList);
     *
     */
    app_show_map_with_POI_list:function(poiList) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.8&quot;)) {
            return;
        }

        var params = {};
        params.poiList = poiList;

        paramString = Internal.makeParamString(&quot;Locate&quot;, &quot;showMapWithPOIList&quot;,params, &#x27;show_map_with_POI_list&#x27;);

        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Locate_a.showMapWithPOIList(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    }

};

/**
 * @class CtripBusiness
 * @description Ctrip业务相关，需要返回数据给H5页面
 * @brief Ctrip业务相关，需要返回数据给H5页面
 */
var CtripBusiness = {

    /**
     * @description 选择常用发票title
     * @brief 选择常用发票title
     * @param {String} selectedInvoiceTitle 当前已经选择好的发票title
     * @method app_choose_invoice_title
     * @author jimzhao
     * @since v5.6
     * @example
     *
     * 
        CtripBusiness.app_choose_invoice_title(&quot;上次选择的发票title，或者为空，用于标记已选title&quot;);
        
        //调用之后，H5页面会收到回调数据
        var json_obj =
        {
            tagname:&#x27;choose_invoice_title&#x27;,
            param:{
                selectedInvoiceTitle:&quot;所选择的发票title&quot;
            }
        }
        
        app.callback(json_obj);
     */
    app_choose_invoice_title:function(selectedInvoiceTitle) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.6&quot;)) {
            return;
        }

        if (!selectedInvoiceTitle) {
            selectedInvoiceTitle = &quot;&quot;;
        }
        var params = {};
        params.selectedInvoiceTitle = selectedInvoiceTitle;
        paramString = Internal.makeParamString(&quot;Business&quot;, &quot;chooseInvoiceTitle&quot;, params, &#x27;choose_invoice_title&#x27;);

        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Business_a.chooseInvoiceTitle(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

    //

    /**
     * @description 进入语音搜索,5.7版本，语音搜索之后的结果，不需要BU处理，只需调用即可，后续版本，可能只做语音解析，解析结果传递给H5，BU自行处理
     * @brief 进入语音搜索
     * @param {int} businessType 业务类型(0. 无（默认）1. 机票 2. 酒店3 . 火车票 5. 目的地 6. 攻略 7.景点门票 8.周末/短途游)  61：团队游 62：周末游  63：自由行 64：邮轮  
     * @method app_show_voice_search
     * @author jimzhao
     * @since v5.7
     * @example
     *
     * 
        CtripBusiness.app_show_voice_search(7);
        
        //调用之后，H5页面会收到回调数据
        var json_obj =
        {
            tagname:&#x27;show_voice_search&#x27;,
           //param:{} 后续版本使用，返回语音解析的数据map，5.7暂不提供
        }
        
        app.callback(json_obj);
     */
    app_show_voice_search:function(businessType) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.7&quot;)) {
            return;
        }

        var params = {};
        params.businessType = businessType;
        paramString = Internal.makeParamString(&quot;Business&quot;, &quot;showVoiceSearch&quot;, params, &#x27;show_voice_search&#x27;);

        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Business_a.showVoiceSearch(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

    /**
     * @description 打开Hybrid广告页面，会自动显示底部栏，且右上角有分享安妮
     * @brief 打开Hybrid广告页面
     * @method app_open_adv_page
     * @param {String} advUrl 广告URL， URL参数带title=xxx,设置xxx为标题
     * @since v5.4
     * @author jimzhao
     * @example

      CtripBusiness.app_open_adv_page(&quot;http://pages.ctrip.com/adv.html?title=标题xxx&quot;);
     */
    app_open_adv_page:function(advUrl) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.4&quot;)) {
            return;
        } 

        var params = {};
        params.advUrl = advUrl;
        paramString = Internal.makeParamString(&quot;Util&quot;, &quot;openAdvPage&quot;, params, &quot;open_adv_page&quot;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) 
        {
            window.Util_a.openAdvPage(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

    /**
     * @description 查看最新版本功能介绍
     * @brief 查看最新版本功能介绍
     * @since v5.2
     * @method app_show_newest_introduction
     * @author jimzhao
     * @example 

     CtripUtil.app_show_newest_introduction();
     */
    app_show_newest_introduction:function() {
        paramString = Internal.makeParamString(&quot;Util&quot;, &quot;showNewestIntroduction&quot;, null, &quot;show_newest_introduction&quot;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Util_a.showNewestIntroduction(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

    /**
     * @description 检查App的版本更新
     * @brief 检查App的版本更新
     * @since v5.2
     * @method app_check_update
     * @author jimzhao
     * @example 

     CtripBusiness.app_check_update();
     *
     */
    app_check_update:function() {
        paramString = Internal.makeParamString(&quot;Util&quot;, &quot;checkUpdate&quot;, null, &quot;check_update&quot;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Util_a.checkUpdate(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

    /**
     * @description 推荐携程旅行给好友
     * @brief 推荐携程旅行给好友
     * @since v5.2
     * @method app_recommend_app_to_friends
     * @author jimzhao
     * @example 

        CtripBusiness.app_recommend_app_to_friends();
     *
     */
    app_recommend_app_to_friends:function() {
        paramString = Internal.makeParamString(&quot;Util&quot;, &quot;recommendAppToFriends&quot;, null, &quot;recommend_app_to_friends&quot;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Util_a.recommendAppToFriends(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

    /**
     * @description 添加微信好友
     * @brief 添加微信好友
     * @since v5.2
     * @method app_add_weixin_friend
     * @author jimzhao
     * @example 

        CtripBusiness.app_add_weixin_friend();

     */
    app_add_weixin_friend:function() {
        paramString = Internal.makeParamString(&quot;Util&quot;, &quot;addWeixinFriend&quot;, null, &quot;add_weixin_friend&quot;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Util_a.addWeixinFriend(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

    /**
     * @description 调用App的分享, 可以支持iOS6系统的分享
     * @brief 调用App的分享
     * @param {String} imageRelativePath 将要分享的图片相对路径，相对webapp的路径
     * @param {String} text 需要分享的文字
     * @param {String} title 需要分享的标题, v5.4开始支持该字段，微信和email支持；
     * @param {String} linkUrl 需要分享的链接, v5.4开始支持该字段
     * @param {boolean} isIOSSystemShare  是否是iOS6以上使用系统分享功能,对于先前门票分享功能，需要为true，其它都是false
     * @method app_call_system_share
     * @since v5.3
     * @author jimzhao
     * @example

     *  微信(微信朋友/微信朋友圈)分享说明：
        1. 图片分享，只能分享图片，所传的文字，title都无效；
        2. 链接分享，所传的图片为分享网页的缩略图，title有效；
        3. 纯文本分享，只能分享text，title无效；
        4. 优先级 链接分享&gt;图片分享&gt;纯文本分享。
           a. 如果有linkUrl，会被当作网页分享，图片作为缩略图；
           b. 如果没有linkUrl，有图片，当作图片分享，text,title无效;
           c. 如果没有linkUrl，没有图片，当作纯文本分享；
        
        微博分享：
        1. 图片为所分享的图片；
        2. 分享title不起作用；
        3. 如果linkUrl有， 分享的text后面会自动添加linkUrl
    
        Email分享：
        1. 图片为所分享的图片；
        2. 分享title作为Email标题；
        3. 如果有linkUrl，分享的text后面会自动添加linkUrl;

        短信分享：
        1. 图片为所分享的图片；注：iOS7.0之后才支持；
        2. 分享title不起作用；
        3. 如果有linkUrl，分享的text后面会自动添加linkUrl;

        复制分享：
        1. 分享的图片不起作用;
        2. 分享的title不起作用;
        3. 如果有linkUrl，分享的text后面会自动添加linkUrl;

        CtripBusiness.app_call_system_share(&quot;../wb_cache/pkg_name/md5_url_hash&quot;, &quot;text to share weibo&quot;, &quot;this is titile&quot;, &quot;http://www.ctrip.com/&quot;, false);

     */
    app_call_system_share:function(imageRelativePath, text, title, linkUrl, isIOSSystemShare) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.3&quot;)) {
            return;
        }
        var params = {};
        if(!imageRelativePath) {
            imageRelativePath = &quot;&quot;;
        }

        if (!title) {
            title = &quot;&quot;;
        }
        
        if (!text) {
            text = &quot;&quot;;
        }

        if (!linkUrl) {
            linkUrl = &quot;&quot;;
        }

        params.title = title;
        params.text = text;
        params.linkUrl = linkUrl;
        params.imageRelativePath = imageRelativePath;
        params.isIOSSystemShare = isIOSSystemShare;

        paramString = Internal.makeParamString(&quot;Util&quot;, &quot;callSystemShare&quot;, params, &quot;call_system_share&quot;);

        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        }
        else if (Internal.isAndroid) {
            window.Util_a.callSystemShare(paramString);
        }
        else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

    /**
     * @description Native收集用户行为,该日志会被上传
     * H5页面调用该函数，需要将增加的event_name告知native，native需要整理纪录
     * @brief 收集ActionLog
     * @method app_log_event
     * @param {String} event_name 需要纪录的事件名
     * @since v5.2
     * @author jimzhao
     * @example 

        CtripBusiness.app_log_event(&#x27;GoodDay&#x27;)
     */
    app_log_event:function(event_name) {
        if (Internal.isNotEmptyString(event_name)) {
            var params = {};
            params.event = event_name;
            paramString =  Internal.makeParamString(&quot;Util&quot;, &quot;logEvent&quot;, params, &quot;log_event&quot;);

            if (Internal.isIOS) {
                url = Internal.makeURLWithParam(paramString);
                Internal.loadURL(url);
            }
            else if (Internal.isAndroid) {
                window.Util_a.logEvent(paramString);
            }
            else if (Internal.isWinOS) {
                Internal.callWin8App(paramString);
            }
        }
    },

     /**
     * @description 获取设备相关信息，相关部门需要
     * @brief 获取设备相关信息，相关部门需要
     * @method app_get_device_info
     * @since v5.7
     * @author jimzhao
     * @example 

        CtripBusiness.app_get_device_info()
        调用之后，返回数据

        var json_obj = {
            IP:&quot;&quot;,
            OS:&quot;\U82f9\U679c&quot;,
            account:&quot;&quot;,
            areaCode:&quot;&quot;,
            baseStation:&quot;&quot;,
            clientID:12933032900000135327,
            latitude:0,
            longitude:0,
            mac:&quot;10:DD:B1:CF:C1:80&quot;,
            port:&quot;&quot;,
            wifiMac:&quot;&quot;
        };

        app.callback(json_obj);
     */
    app_get_device_info:function() {
        if (!Internal.isSupportAPIWithVersion(&quot;5.7&quot;)) {
            return;
        }

        paramString = Internal.makeParamString(&quot;Business&quot;, &quot;getDeviceInfo&quot;, null, &quot;get_device_info&quot;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        } else if (Internal.isAndroid) {
            window.Business_a.getDeviceInfo(paramString);
        } else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },


     /**
     * @description 获取短信中的验证码
     * @brief 获取短信中的验证码,iPhone不能读取，直接callback
     * @method app_read_verification_code_from_sms
     * @callback read_verification_code_from_sms
     * @since v5.8
     * @author jimzhao
     * @example 

        CtripBusiness.app_read_verification_code_from_sms()
        调用之后，返回数据

        var json_obj = {
            verificationCode = &quot;8890&quot;
        };

        app.callback(json_obj);
     */
    app_read_verification_code_from_sms:function() {
        if (!Internal.isSupportAPIWithVersion(&quot;5.8&quot;)) {
            return;
        }

        paramString = Internal.makeParamString(&quot;Business&quot;, &quot;readVerificationCodeFromSMS&quot;, null, &quot;read_verification_code_from_sms&quot;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        } else if (Internal.isAndroid) {
            window.Business_a.readVerificationCodeFromSMS(paramString);
        } else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

     /**
     * @description 记录google remarkting的screenName
     * @brief 记录google remarkting的screenName
     * @param {String} screenName 需要纪录的页面名
     * @method app_log_google_remarkting
     * @since v5.8
     * @author jimzhao
     * @example 

        CtripBusiness.app_log_google_remarkting(window.location.href);
     */
    app_log_google_remarkting:function(screenName) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.8&quot;)) {
            return;
        }
        if (!screenName) {
            screenName = &quot;&quot;;
        }

        var params = {};
        params.screenName = screenName;
        paramString = Internal.makeParamString(&quot;Business&quot;, &quot;logGoogleRemarking&quot;, params, &quot;log_google_remarkting&quot;);

        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        } else if (Internal.isAndroid) {
            window.Business_a.logGoogleRemarking(paramString);
        } else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },


     /**
     * @description 检查渠道包信息
     * @brief 检查渠道包信息
     * @method app_check_app_package_info
     * @callback check_app_package_info
     * @since v5.8
     * @author jimzhao
     * @example 

        CtripBusiness.app_check_android_package_info();
        //调用之后，app返回
        var json_obj = {
            isHideAdv:true,
            isHideAppRecommend:true
        };

        app.callback(json_obj);
     */
    app_check_app_package_info:function() {
        if (Internal.isSupportAPIWithVersion(&quot;5.8&quot;)) {
            return;
        }

        paramString = Internal.makeParamString(&quot;Business&quot;, &quot;checkAppPackageInfo&quot;, params, &quot;check_app_package_info&quot;);

        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        } else if (Internal.isAndroid) {
            window.Business_a.checkAndroidPackageInfo(paramString);
        } else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }

    },

    

    /**
     * @description 从通讯录选取联系人
     * @brief 从通讯录选取联系人
     * @method app_choose_contact_from_addressbook
     * @author jimzhao
     * @since v5.9
     * @example
     *
     * 
        //调用API
        CtripBusiness.app_choose_contact_from_addressbook();
         
        //调用之后，app返回
        var json_obj = {
            name:&quot;xxx&quot;,
            phoneList:[{&quot;家庭&quot;:1320000000}, {&quot;工作&quot;:021888888888}], //手机号码有一个标签＋号码
            emailList:[{&quot;家庭&quot;:a@gmail.com}, {&quot;工作&quot;:b@yahoo.com}]  //email有标签＋号码
        };

        app.callback(json_obj);

     */
    app_choose_contact_from_addressbook:function() {
        if (Internal.isSupportAPIWithVersion(&quot;5.9&quot;)) {
            return;
        }

        paramString = Internal.makeParamString(&quot;Business&quot;, &quot;chooseContactFromAddressbook&quot;, params, &quot;choose_contact_from_addressbook&quot;);

        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        } else if (Internal.isAndroid) {
            window.Business_a.chooseContactFromAddressbook(paramString);
        } else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    }
};

/**
 * @class CtripPage
 * @description 页面跳转，导航，刷新相关API
 * @brief 页面跳转，导航，刷新相关API
 */
var CtripPage = {

    /**
     * @description 设置当前页面名，可用于页面导航，刷新
     * @brief 设置当前页面名，可用于页面导航，刷新
     * @param {String} pageName 设置当前页面名
     * @method app_set_page_name
     * @author jimzhao
     * @since v5.6
     * @example
     *
     * 
        CtripPage.app_set_page_name(&quot;USE_CAR_PAGE_IDENTIFY&quot;);

     */
    app_set_page_name:function(pageName) {
        if (!Internal.isSupportAPIWithVersion(&quot;5.6&quot;)) {
            return;
        }

        if (!pageName) {
            pageName = &quot;&quot;;
        }

        var params = {};
        params.pageName = pageName;

        paramString = Internal.makeParamString(&quot;Page&quot;, &quot;setPageName&quot;, params, &quot;set_page_name&quot;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        } else if (Internal.isAndroid) {
            window.Page_a.setPageName(paramString);
        } else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

   /**
     * @description 多webview app，回退到指定的webview页面
     * @brief 回退到指定的webview页面
     * @param {String} pageName 需要回退的页面名
     * @method app_back_to_page
     * @author jimzhao
     * @since v5.8
     * @example
     *
     * 
        CtripPage.app_back_to_page(&quot;USE_CAR_PAGE_IDENTIFY&quot;);

     */
    app_back_to_page:function(pageName) {
         if (!Internal.isSupportAPIWithVersion(&quot;5.8&quot;)) {
            return;
        }

        if (!pageName) {
            pageName = &quot;&quot;;
        }

        var params = {};
        params.pageName = pageName;

        paramString = Internal.makeParamString(&quot;Page&quot;, &quot;backToPage&quot;, params, &quot;back_to_page&quot;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        } else if (Internal.isAndroid) {
            window.Page_a.backToPage(paramString);
        } else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },

    /**
     * @description 显示native的loading界面
     * @brief 显示native的loading界面
     * @method app_show_loading_page
     * @author jimzhao
     * @since v5.9
     * @example
     *
     * 
        CtripPage.app_show_loading_page();

     */
    app_show_loading_page:function() {
        if (!Internal.isSupportAPIWithVersion(&quot;5.9&quot;)) {
            return;
        }

        paramString = Internal.makeParamString(&quot;Page&quot;, &quot;showLoadingPage&quot;, null, &quot;show_loading_page&quot;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        } else if (Internal.isAndroid) {
            window.Page_a.showLoadingPage(paramString);
        } else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    },


    /**
     * @description 隐藏native的loading界面
     * @brief 隐藏native的loading界面
     * @method app_hide_loading_page
     * @author jimzhao
     * @since v5.9
     * @example
     *
     * 
        CtripPage.app_hide_loading_page();

     */
    app_hide_loading_page:function() {
        if (!Internal.isSupportAPIWithVersion(&quot;5.9&quot;)) {
            return;
        }

        paramString = Internal.makeParamString(&quot;Page&quot;, &quot;hideLoadingPage&quot;, null, &quot;hide_loading_page&quot;);
        if (Internal.isIOS) {
            url = Internal.makeURLWithParam(paramString);
            Internal.loadURL(url);
        } else if (Internal.isAndroid) {
            window.Page_a.hideLoadingPage(paramString);
        } else if (Internal.isWinOS) {
            Internal.callWin8App(paramString);
        }
    }
};

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
